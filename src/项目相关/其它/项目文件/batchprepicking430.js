var className = "BatchPrePicking";
var jspUrl = "rfbiz/outbound/batchprepicking/batchprepicking.jsp";
var hide_Message_01 = "hide_Message_01";
var hide_Message_02 = "hide_Message_02";
var hide_Message_03 = "hide_Message_03";
var hide_Message_04 = "hide_Message_04";
var hide_Message_05 = "hide_Message_05";
var hide_Message_06 = "hide_Message_06";
var hide_Message_07 = "hide_Message_07";
var hide_Message_08 = "hide_Message_08";
var hide_Message_09 = "hide_Message_09";
var hide_Message_10 = "hide_Message_10";
var hide_Message_11 = "hide_Message_11";
var hide_Message_12 = "hide_Message_12";
var hide_Message_13 = "hide_Message_13";
var hide_Message_14 = "hide_Message_14";
var hide_Message_15 = "hide_Message_15";
var hide_Message_16 = "hide_Message_16";
var hide_Message_17 = "hide_Message_17";
var hide_Message_18 = "hide_Message_18";
var hide_Message_19 = "hide_Message_19";
var hide_Message_20 = "hide_Message_20";
var hide_Message_21 = "hide_Message_21";
var hide_Message_22 = "hide_Message_22";
var hide_Message_23 = "hide_Message_23";
var hide_Message_24 = "hide_Message_24";
var hide_Message_25 = "hide_Message_25";
var hide_Message_26 = "hide_Message_26";
var hide_Message_27 = "hide_Message_27";
var hide_Message_28 = "hide_Message_28";
var hide_Message_29 = "hide_Message_29";
var hide_Message_30 = "hide_Message_30";
var hide_Message_31 = "hide_Message_31";
var hide_Message_32 = "hide_Message_32";
var hide_Message_33 = "hide_Message_33";
var hide_Message_34 = "hide_Message_34";
var hide_Message_35 = "hide_Message_35";
var hide_Message_36 = "hide_Message_36";
var hide_Message_37 = "hide_Message_37";
var hide_Message_38 = "hide_Message_38";
var hide_Message_39 = "hide_Message_39";
var hide_Message_40 = "hide_Message_40";
var hide_Lbl_01 = "hide_Lbl_01";
var hide_Lbl_02 = "hide_Lbl_02";
var hide_Lbl_03 = "hide_Lbl_03";
var hide_Lbl_04 = "hide_Lbl_04";
var hide_Lbl_05 = "hide_Lbl_05";
var hide_Lbl_06 = "hide_Lbl_06";
var hide_Lbl_07 = "hide_Lbl_07";
var hide_Lbl_08 = "hide_Lbl_08";
var hide_Lbl_09 = "hide_Lbl_09";
var hide_Lbl_10 = "hide_Lbl_10";
var lastSEQUpdate1 = 0;
var lastSEQUpdate2 = 0;
var lastSEQUpdate3 = 0;
var lastSEQUpdate4 = 0;
var lastSEQUpdate5 = 0;
var lastSEQUpdate6 = 0;
var hide_MLT_PCK_TYP = "hide_MLT_PCK_TYP";
var hide_PCK_DSP_MSG = "hide_PCK_DSP_MSG";
var hide_RF_SKU_UD1 = "hide_RF_SKU_UD1";
var hide_PCK_PCS_SCN = "hide_PCK_PCS_SCN";
var hide_PCK_INV_COU = "hide_PCK_INV_COU";
var hide_Tsk_Hld_Tim = "hide_Tsk_Hld_Tim";
var hide_PageControl_1 = "hide_PageControl_1";
var hide_PageControl_2 = "hide_PageControl_2";
var hide_PageControl_3 = "hide_PageControl_3";
var hide_PageControl_4 = "hide_PageControl_4";
var hide_PageControl_5 = "hide_PageControl_5";
var hide_PageControl_6 = "hide_PageControl_6";
var hide_PageControl_7 = "hide_PageControl_7";
var hide_TaskType_FromCombingCart_1 = "hide_TaskType_FromCombingCart_1";
var hide_WorkingArea_1 = "hide_WorkingArea_1";
var hide_TERMINALNO_2 = "hide_TERMINALNO_2";
var hide_CARTNO_2 = "hide_CARTNO_2";
var hide_TURNOVERBOXNO_2 = "hide_TURNOVERBOXNO_2";
var hide_DELETEBOX_2 = "hide_DELETEBOX_2";
var hide_CARTNO_3 = "hide_CARTNO_3";
var hide_FMLOCATION_3 = "hide_FMLOCATION_3";
var hide_FMTRACEID_3 = "hide_FMTRACEID_3";
var hide_Udf1_3 = "hide_Udf1_3";
var hide_Udf2_3 = "hide_Udf2_3";
var hide_Udf3_3 = "hide_Udf3_3";
var hide_XLocationId_3 = "hide_XLocationId_3";
var hide_customerId_3 = "hide_customerId_3";
var HIDE_INVENQTY_3 = "HIDE_INVENQTY_3";
var hide_BOX_QTY_4 = "hide_BOX_QTY_4";
var hide_SKU_4 = "hide_SKU_4";
var HIDE_CHECKINVEN_4 = "HIDE_CHECKINVEN_4";
var hide_XLocationId_6 = "hide_XLocationId_6";
var hide_SplitCartonList_7 = "hide_SplitCartonList_7";
var QSKeys = new Array(hide_TERMINALNO_2, hide_CARTNO_2, hide_TURNOVERBOXNO_2, hide_DELETEBOX_2, hide_CARTNO_3, hide_FMLOCATION_3, hide_FMTRACEID_3, hide_XLocationId_3, hide_customerId_3, HIDE_INVENQTY_3, hide_BOX_QTY_4, hide_SKU_4, HIDE_CHECKINVEN_4, hide_XLocationId_6, hide_SplitCartonList_7, "break", hide_WorkingArea_1, hide_TaskType_FromCombingCart_1, hide_RF_SKU_UD1, hide_Udf1_3, hide_Udf2_3, hide_Udf3_3, hide_Tsk_Hld_Tim, hide_MLT_PCK_TYP);
var _div1Input = "div1Input";
var _div2Input = "div2Input";
var _div3Input = "div3Input";
var _div4Input = "div4Input";
var _div5Input = "div5Input";
var _div6Input = "div6Input";
var _div7Input = "div7Input";
var _div1Waiting = "div1Waiting";
var inViewsKeys = new Array(_div1Input, _div2Input, _div3Input, _div4Input, _div5Input, _div6Input, _div7Input, _div1Waiting);
var _prevView = _div1Input;
var lbl_Message_1 = "lbl_Message_1";
var lbl_Message_2 = "lbl_Message_2";
var lbl_Message_3 = "lbl_Message_3";
var lbl_Message_4 = "lbl_Message_4";
var lbl_Message_5 = "lbl_Message_5";
var lbl_Message_6 = "lbl_Message_6";
var lbl_Message_7 = "lbl_Message_7";
var lbl_MessageList_0 = new Array(lbl_Message_1, lbl_Message_2, lbl_Message_3, lbl_Message_4, lbl_Message_5, lbl_Message_6, lbl_Message_7);
var userd_Color_1 = "#00ff00";
var userd_Color_2 = "#004400";
var userd_Color_3 = "#008800";
var userd_Color_4 = "#004400";
var userd_BoxNo = new Array();
var userd_LocNo = new Array();
var userd_Location = new Array();
var userd_Sku = new Array();
var userd_SkuName = new Array();
var userd_CustomerID = new Array();
var userd_Qty = new Array();
var userd_Uom = new Array();
var userd_TurnOverBoxNo = new Array();
var userd_PickToLocation = new Array();
var userd_FmTraceId = new Array();
var userd_WaveNo = new Array();
var userd_showLocation = new Array();
var userd_showSku = new Array();
var userd_showSkuName = new Array();
var userd_showQty = new Array();
var userd_showUom = new Array();
var userd_showTraceId = new Array();
var userd_showUdf1 = new Array();
var userd_showUdf2 = new Array();
var userd_showUdf3 = new Array();
var userd_showUserdefine1 = new Array();
var userd_showUserdefine2 = new Array();
userd_Ptltaskid = new Array();
var userd_QTY_index_Array = new Array();
var userd_PerSumQty = 1;
var userd_PerSumQty_id = "";
var userd_selectIndex_1 = -1;
var userd_SelectColor = "#00FFFF";
var userd_MouseColor = "#E0E0E0";
var userd_bgColor = "#FFFFFF";
var userd_LastFmLocationId = "";
var userd_MaxScanQty = 0;
var userd_FromCombiningCart_Id = "";
var userd_FromCombiningCart_Area = "";
var userd_FromCombiningCart_TemUseBack = "";
var userd_FromCombiningCart_List = "";
var userd_FromCombiningCart_IsInit = true;
var userd_XLocationShwList_6 = new Array();
var userd_TableId_1 = "userd_TableId_1";
var userd_ThNameList_1 = new Array();
var userd_TdContentList_1 = new Array();
var userd_MinLineNumber_1 = 11;
var userd_MaxLineNumber_1 = 11;
var userd_ShowLineNumber_1 = true;
var userd_ShowDeleteAction_1 = false;
var userd_ShowInfoByDESC_1 = false;
var userd_TableId_2 = "userd_TableId_2";
var userd_ThNameList_2 = new Array();
var userd_TdContentList_2 = new Array();
var userd_MinLineNumber_2 = 11;
var userd_MaxLineNumber_2 = 999;
var userd_ShowLineNumber_2 = true;
var userd_ShowDeleteAction_2 = false;
var userd_ShowInfoByDESC_2 = false;
var userd_SplitCartonList_7 = null;
var userd_ScanCartonList_7 = new Array();
var userd_TableId_3 = "userd_TableId_3";
var userd_ThNameList_3 = new Array();
var userd_TdContentList_3 = new Array();
var userd_MinLineNumber_3 = 11;
var userd_MaxLineNumber_3 = 11;
var userd_ShowLineNumber_3 = true;
var userd_ShowDeleteAction_3 = true;
var userd_ShowInfoByDESC_3 = true;
var userd_TableId_4 = "userd_TableId_4";
var userd_ThNameList_4 = new Array();
var userd_TdContentList_4 = new Array();
var userd_MinLineNumber_4 = 11;
var userd_MaxLineNumber_4 = 999;
var userd_ShowLineNumber_4 = true;
var userd_ShowDeleteAction_4 = true;
var userd_ShowInfoByDESC_4 = true;
var checkTotalInput = 0;
var sfc_Code_1 = getValue3(hide_PageControl_1);
var but_LinkTurnoverBox_1 = "but_LinkTurnoverBox_1";
var but_BatchPrePicking_1 = "but_BatchPrePicking_1";
var sfc_Code_2 = getValue3(hide_PageControl_2);
var txt_TerminalNo_2 = "txt_TerminalNo_2";
var but_QueryCartNo_2 = "but_QueryCartNo_2";
var txt_CartNo_2 = "txt_CartNo_2";
var txt_TurnoverBoxNo_2 = "txt_TurnoverBoxNo_2";
var div_TurnoverBoxNoList_2 = "div_TurnoverBoxNoList_2";
var but_Complete_2 = "but_Complete_2";
var but_Cancel_2 = "but_Cancel_2";
var sfc_Code_3 = getValue3(hide_PageControl_3);
var txt_CartNo_3 = "txt_CartNo_3";
var wxt_LBLSKU_3 = "wxt_LBLSKU_3";
var wxt_SKUDescr_3 = "wxt_SKUDescr_3";
var but_RelatingFmLocatin_3 = "but_RelatingFmLocatin_3";
var wxt_FMLocation_3 = "wxt_FMLocation_3";
var txt_FMLocation_3 = "txt_FMLocation_3";
var wxt_FMTraceID_3 = "wxt_FMTraceID_3";
var txt_FMTraceID_3 = "txt_FMTraceID_3";
var wxt_SKU_3 = "wxt_SKU_3";
var txt_SKU_3 = "txt_SKU_3";
var wxt_UDF1_3 = "wxt_UDF1_3";
var wxt_UDF2_3 = "wxt_UDF2_3";
var wxt_UDF3_3 = "wxt_UDF3_3";
var wxt_Userdefine1_3 = "wxt_Userdefine1_3";
var wxt_Userdefine2_3 = "wxt_Userdefine2_3";
var div_LocationInfoList_3 = "div_LocationInfoList_3";
var but_Confirm_3 = "but_Confirm_3";
var but_Cancel_3 = "but_Cancel_3";
var but_StockOut_3 = "but_StockOut_3";
var but_SplitCarton_3 = "but_SplitCarton_3";
var sfc_Code_4 = getValue3(hide_PageControl_4);
var wxt_SKU_4 = "wxt_SKU_4";
var wxt_SKUDescr_4 = "wxt_SKUDescr_4";
var wxt_Qty_4 = "wxt_Qty_4";
var cmb_PerCutQty_4 = "cmb_PerCutQty_4";
var chk_ClearQty_4 = "chk_ClearQty_4";
var txt_PerCutQty_4 = "txt_PerCutQty_4";
var txt_Banlance_4 = "txt_Banlance_4";
var div_BoxInfoList_4 = "div_BoxInfoList_4";
var but_Confirm_4 = "but_Confirm_4";
var but_Cancel_4 = "but_Cancel_4";
var LBL_LOC_1 = "LBL_LOC_1";
var LBL_LOC_2 = "LBL_LOC_2";
var LBL_LOC_3 = "LBL_LOC_3";
var LBL_LOC_4 = "LBL_LOC_4";
var LBL_LOC1_QTY = "LBL_LOC1_QTY";
var LBL_LOC2_QTY = "LBL_LOC2_QTY";
var LBL_LOC3_QTY = "LBL_LOC3_QTY";
var LBL_LOC4_QTY = "LBL_LOC4_QTY";
var sfc_Code_5 = getValue3(hide_PageControl_5);
var txt_SKU_5 = "txt_SKU_5";
var wxt_SKUDescr_5 = "wxt_SKUDescr_5";
var wxt_Qty_5 = "wxt_Qty_5";
var wxt_AllQty_5 = "wxt_AllQty_5";
var div_BoxInfoList_5 = "div_BoxInfoList_5";
var but_Confirm_5 = "but_Confirm_5";
var but_Cancel_5 = "but_Cancel_5";
var sfc_Code_6 = getValue3(hide_PageControl_6);
var txt_XLocation_6 = "txt_XLocation_6";
var div_XLocationList_6 = "div_XLocationList_6";
var but_Unlinked_6 = "but_Unlinked_6";
var but_Quit_6 = "but_Quit_6";
var sfc_Code_7 = getValue3(hide_PageControl_7);
var txt_SerialNo_7 = "txt_SerialNo_7";
var div_SplitCartonList_7 = "div_SplitCartonList_7";
var but_SplitCarton_7 = "but_SplitCarton_7";
var but_Cancel_7 = "but_Cancel_7";

function initHtmlPage() {
    _prevView = _div1Input;
    showViewSingle(_div1Input, inViewsKeys);
    userd_BoxNo = new Array();
    userd_LocNo = new Array();
    userd_Location = new Array();
    userd_Sku = new Array();
    userd_SkuName = new Array();
    userd_CustomerID = new Array();
    userd_Qty = new Array();
    userd_Uom = new Array();
    userd_TurnOverBoxNo = new Array();
    userd_PickToLocation = new Array();
    userd_FmTraceId = new Array();
    userd_WaveNo = new Array();
    userd_showLocation = new Array();
    userd_showSku = new Array();
    userd_showSkuName = new Array();
    userd_showQty = new Array();
    userd_showUom = new Array();
    userd_showTraceId = new Array();
    userd_showUdf1 = new Array();
    userd_showUdf2 = new Array();
    userd_showUdf3 = new Array();
    userd_showUserdefine1 = new Array();
    userd_showUserdefine2 = new Array();
    userd_QTY_index_Array = new Array();
    userd_PerSumQty_id = "";
    checkTotalInput = 0;
    userd_Ptltaskid = new Array();
    initPageOne();
    initPageTwo();
    initPageThree();
    initPageFour();
    initPageFive();
    initPageSix();
    initPageSeven();
    intiUserDefined();
    for (var i = 0; i < QSKeys.length; i++) {
        if (QSKeys[i] == "break") {
            break;
        }
        ;setValue(QSKeys[i], "");
    }
    ;autoFocus(but_LinkTurnoverBox_1);
    if (userd_FromCombiningCart_Id != null && userd_FromCombiningCart_Id.length > 0 && userd_FromCombiningCart_IsInit) {
        userd_FromCombiningCart_IsInit = false;
        BATCHPREPICKING_ACTION();
        setValue(txt_CartNo_3, userd_FromCombiningCart_Id);
        doCartNo3Action();
    }
};

function updateMessageBar(message) {
    if (message.indexOf("hide_Message_") == 0) {
        message = getValue(message);
    }
    ;
    for (var i = 0; i < lbl_MessageList_0.length; i++) {
        setInnerHTML(lbl_MessageList_0[i], message);
    }
};

function returnPrevPage() {
    showViewSingle(_prevView, inViewsKeys);
};

function initPageOne() {
};

function initPageTwo() {
    sfc_SetValue(txt_TerminalNo_2, "", sfc_Code_2);
    sfc_SetValue(txt_CartNo_2, "", sfc_Code_2);
    sfc_SetValue(txt_TurnoverBoxNo_2, "", sfc_Code_2);
    sfc_SetValue(div_TurnoverBoxNoList_2, "", sfc_Code_2);
};

function initPageThree() {
    sfc_SetValue(txt_CartNo_3, "", sfc_Code_3);
    sfc_SetValue(wxt_LBLSKU_3, "", sfc_Code_3);
    sfc_SetValue(wxt_SKUDescr_3, "", sfc_Code_3);
    sfc_SetValue(wxt_FMLocation_3, "", sfc_Code_3);
    sfc_SetValue(txt_FMLocation_3, "", sfc_Code_3);
    sfc_SetValue(wxt_FMTraceID_3, "", sfc_Code_3);
    sfc_SetValue(txt_FMTraceID_3, "", sfc_Code_3);
    sfc_SetValue(wxt_SKU_3, "", sfc_Code_3);
    sfc_SetValue(txt_SKU_3, "", sfc_Code_3);
    sfc_SetValue(wxt_UDF1_3, "", sfc_Code_3);
    sfc_SetValue(wxt_UDF2_3, "", sfc_Code_3);
    sfc_SetValue(wxt_UDF3_3, "", sfc_Code_3);
    sfc_SetValue(wxt_Userdefine1_3, "", sfc_Code_3);
    sfc_SetValue(wxt_Userdefine2_3, "", sfc_Code_3);
    sfc_SetValue(div_LocationInfoList_3, "", sfc_Code_3);
    setDisabled(txt_CartNo_3, false);
};

function initPageFour() {
    sfc_SetValue(wxt_SKU_4, "", sfc_Code_4);
    sfc_SetValue(wxt_SKUDescr_4, "", sfc_Code_4);
    sfc_SetValue(wxt_Qty_4, "", sfc_Code_4);
    sfc_SetValue(txt_PerCutQty_4, "", sfc_Code_4);
    sfc_SetValue(txt_Banlance_4, "", sfc_Code_4);
    sfc_SetValue(div_BoxInfoList_4, "", sfc_Code_4);
    setDisabled(txt_PerCutQty_4, true);
};

function initPageFive() {
    sfc_SetValue(txt_SKU_5, "", sfc_Code_5);
    sfc_SetValue(wxt_SKUDescr_5, "", sfc_Code_5);
    sfc_SetValue(wxt_Qty_5, "0", sfc_Code_5);
    sfc_SetValue(wxt_AllQty_5, "0", sfc_Code_5);
    sfc_SetValue(div_BoxInfoList_5, "", sfc_Code_5);
};

function initPageSix() {
    sfc_SetValue(txt_XLocation_6, "", sfc_Code_6);
    sfc_SetValue(div_XLocationList_6, "", sfc_Code_6);
};

function initPageSeven() {
    sfc_SetValue(txt_SerialNo_7, "", sfc_Code_7);
    sfc_SetValue(div_SplitCartonList_7, "", sfc_Code_7);
};

function intiUserDefined() {
};

function isEnterAction(event) {
    return event.keyCode == 13;
};

function first_ActionControl(id, event) {
    if (event == null || event.keyCode == 13) {
        if (false) {
            initHtmlPage();
            return;
        }
        ;
        if (id == but_LinkTurnoverBox_1) {
            LINKTRUNOVERBOX_ACTION(id);
            return;
        }
        ;
        if (id == but_BatchPrePicking_1) {
            BATCHPREPICKING_ACTION(id);
            return;
        }
        ;
        if (id == txt_TerminalNo_2) {
            txt_TerminalNo_2_Action(id);
            return;
        }
        ;
        if (id == but_QueryCartNo_2) {
            but_QueryCartNo_2_Action(id);
            return;
        }
        ;
        if (id == txt_CartNo_2) {
            txt_CartNo_2_Action(id);
            return;
        }
        ;
        if (id == txt_TurnoverBoxNo_2) {
            txt_TurnoverBoxNo_2_Action(id);
            return;
        }
        ;
        if (id == but_Complete_2) {
            but_Complete_2_Action(id);
            return;
        }
        ;
        if (id == but_Cancel_2) {
            but_Cancel_2_Action(id);
            return;
        }
        ;
        if (id == txt_CartNo_3) {
            txt_CartNo_3_Action(id);
            return;
        }
        ;
        if (id == but_RelatingFmLocatin_3) {
            but_RelatingFmLocatin_3_Action(id);
            return;
        }
        ;
        if (id == txt_FMLocation_3) {
            txt_FMLocation_3_Action(id);
            return;
        }
        ;
        if (id == txt_FMTraceID_3) {
            txt_FMTraceID_3_Action(id);
            return;
        }
        ;
        if (id == txt_SKU_3) {
            txt_SKU_3_Action(id);
            return;
        }
        ;
        if (id == but_Confirm_3) {
            but_Confirm_3_Action(id);
            return;
        }
        ;
        if (id == but_Cancel_3) {
            but_Cancel_3_Action(id);
            return;
        }
        ;
        if (id == but_StockOut_3) {
            but_StockOut_3_Action(id);
            return;
        }
        ;
        if (id == but_SplitCarton_3) {
            but_SplitCarton_3_Action(id);
            return;
        }
        ;
        if (id == cmb_PerCutQty_4) {
            cmb_PerCutQty_4_Action(id);
            return;
        }
        ;
        if (id == txt_PerCutQty_4) {
            return;
        }
        ;
        if (id == txt_Banlance_4) {
            return;
        }
        ;
        if (id == but_Confirm_4) {
            but_Confirm_4_Action(id);
            return;
        }
        ;
        if (id == but_Cancel_4) {
            but_Cancel_4_Action(id);
            return;
        }
        ;
        if (id == txt_SKU_5) {
            txt_SKU_5_Action(id);
            return;
        }
        ;
        if (id == but_Confirm_5) {
            but_Confirm_5_Action(id);
            return;
        }
        ;
        if (id == but_Cancel_5) {
            but_Cancel_5_Action(id);
            return;
        }
        ;
        if (id == txt_XLocation_6) {
            txt_XLocation_6_Action(id);
            return;
        }
        ;
        if (id == but_Unlinked_6) {
            but_Unlinked_6_Action(id);
            return;
        }
        ;
        if (id == but_Quit_6) {
            but_Quit_6_Action(id);
            return;
        }
        ;
        if (id == txt_SerialNo_7) {
            txt_SerialNo_7_Action(id);
            return;
        }
        ;
        if (id == but_SplitCarton_7) {
            but_SplitCarton_7_Action(id);
            return;
        }
        ;
        if (id == but_Cancel_7) {
            but_Cancel_7_Action(id);
            return;
        }
        ;alert("function first_ActionControl() is Error: " + id + " not found.");
    }
};

function autoFocus(id) {
    if (id == "init") {
        autoFocus(sfc_GetNextId(id, sfc_Code_1));
        return;
    }
    ;
    if (id == but_LinkTurnoverBox_1) {
        setFocus2(but_LinkTurnoverBox_1);
        updateMessageBar("");
        return;
    }
    ;
    if (id == but_BatchPrePicking_1) {
        setFocus2(but_BatchPrePicking_1);
        updateMessageBar("");
        return;
    }
    ;
    if (id == txt_TerminalNo_2) {
        setFocus(txt_TerminalNo_2);
        updateMessageBar(hide_Message_01);
        return;
    }
    ;
    if (id == "ERROR" + txt_TerminalNo_2) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_TerminalNo_2);
        updateMessageBar(hide_Message_03);
        return;
    }
    ;
    if (id == txt_CartNo_2) {
        setFocus(txt_CartNo_2);
        updateMessageBar(hide_Message_02);
        return;
    }
    ;
    if (id == "ERROR" + txt_CartNo_2) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_CartNo_2);
        updateMessageBar(hide_Message_12);
        return;
    }
    ;
    if (id == txt_TurnoverBoxNo_2) {
        setFocus(txt_TurnoverBoxNo_2);
        updateMessageBar(hide_Message_04);
        return;
    }
    ;
    if (id == "OK" + txt_TurnoverBoxNo_2) {
        setFocus(txt_TurnoverBoxNo_2);
        updateMessageBar(getValue(hide_Message_07).replace("&1", " #" + userd_BoxNo.length));
        return;
    }
    ;
    if (id == "ERROR2" + txt_TurnoverBoxNo_2) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_TurnoverBoxNo_2);
        updateMessageBar(getValue(hide_Message_08).replace("&1", " SPRF_BatchPicking "));
        return;
    }
    ;
    if (id == but_Complete_2) {
        setFocus2(but_Complete_2);
        updateMessageBar("");
        return;
    }
    ;
    if (id == sfc_Code_2) {
        doButConfirm2Action();
        return;
    }
    ;
    if (id == txt_CartNo_3) {
        setFocus(txt_CartNo_3);
        updateMessageBar(hide_Message_02);
        return;
    }
    ;
    if (id == "ERROR" + txt_CartNo_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_CartNo_3);
        updateMessageBar(hide_Message_12);
        return;
    }
    ;
    if (id == txt_FMLocation_3) {
        setFocus(txt_FMLocation_3);
        updateMessageBar(hide_Message_09);
        return;
    }
    ;
    if (id == "ERROR1" + txt_FMLocation_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_FMLocation_3);
        updateMessageBar(hide_Message_13);
        return;
    }
    ;
    if (id == "ERROR2" + txt_FMLocation_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_FMLocation_3);
        updateMessageBar(hide_Message_11);
        return;
    }
    ;
    if (id == txt_FMTraceID_3) {
        setFocus(txt_FMTraceID_3);
        updateMessageBar(hide_Message_18);
        return;
    }
    ;
    if (id == "ERROR1" + txt_FMTraceID_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_FMTraceID_3);
        updateMessageBar(hide_Message_19);
        return;
    }
    ;
    if (id == "ERROR2" + txt_FMTraceID_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_FMTraceID_3);
        updateMessageBar(hide_Message_22);
        return;
    }
    ;
    if (id == txt_SKU_3) {
        setFocus(txt_SKU_3);
        updateMessageBar(hide_Message_21);
        return;
    }
    ;
    if (id == "ERROR" + txt_SKU_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_SKU_3);
        updateMessageBar(hide_Message_23);
        return;
    }
    ;
    if (id == but_RelatingFmLocatin_3) {
        setFocus2(but_RelatingFmLocatin_3);
        updateMessageBar(getValue(hide_Message_26).replace("&1", getValue2(wxt_FMLocation_3)));
        return;
    }
    ;
    if (id == but_SplitCarton_3) {
        setFocus2(but_SplitCarton_3);
        updateMessageBar("");
        return;
    }
    ;
    if (id == "ERROR" + but_SplitCarton_3) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus2(but_SplitCarton_3);
        updateMessageBar(hide_Message_27);
        return;
    }
    ;
    if (id == "OK" + but_SplitCarton_3) {
        setFocus2(but_SplitCarton_3);
        updateMessageBar(hide_Message_31);
        return;
    }
    ;
    if (id == but_Confirm_3) {
        setFocus2(but_Confirm_3);
        updateMessageBar("");
        return;
    }
    ;
    if (id == sfc_Code_3) {
        doButConfirm3Action();
        return;
    }
    ;
    if (id == but_Confirm_4) {
        setFocus2(but_Confirm_4);
        updateMessageBar("");
        return;
    }
    ;
    if (id == sfc_Code_4) {
        doButConfirm4Action();
        return;
    }
    ;
    if (id == txt_SKU_5) {
        setFocus(txt_SKU_5);
        updateMessageBar(hide_Message_21);
        return;
    }
    ;
    if (id == "ERROR" + txt_SKU_5) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_SKU_5);
        updateMessageBar(hide_Message_23);
        return;
    }
    ;
    if (id == but_Confirm_5) {
        setFocus2(but_Confirm_5);
        updateMessageBar("");
        return;
    }
    ;
    if (id == sfc_Code_5) {
        doButConfirm5Action();
        return;
    }
    ;
    if (id == txt_XLocation_6) {
        setFocus(txt_XLocation_6);
        updateMessageBar(hide_Message_09);
        return;
    }
    ;
    if (id == "ERROR" + txt_XLocation_6) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_XLocation_6);
        updateMessageBar(hide_Message_11);
        return;
    }
    ;
    if (id == but_Unlinked_6) {
        setFocus2(but_Unlinked_6);
        updateMessageBar("");
        return;
    }
    ;
    if (id == sfc_Code_6) {
        doButUnlinked6Action();
        return;
    }
    ;
    if (id == txt_SerialNo_7) {
        setFocus(txt_SerialNo_7);
        updateMessageBar(hide_Message_28);
        return;
    }
    ;
    if (id == "ERROR1" + txt_SerialNo_7) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_SerialNo_7);
        updateMessageBar(hide_Message_29);
        return;
    }
    ;
    if (id == "ERROR2" + txt_SerialNo_7) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        setFocus(txt_SerialNo_7);
        updateMessageBar(hide_Message_30);
        return;
    }
    ;
    if (id == but_SplitCarton_7) {
        setFocus2(but_SplitCarton_7);
        updateMessageBar("");
        return;
    }
    ;
    if (id == sfc_Code_7) {
        doButSplitCarton7Action();
        return;
    }
    ;alert("function autoFocus() is Error: " + id + " not found.");
};

function LINKTRUNOVERBOX_ACTION() {
    initHtmlPage();
    showViewSingle(_div2Input, inViewsKeys);
    autoFocus(sfc_GetNextId("", sfc_Code_2));
    putInfoIntoTable();
};

function putInfoIntoTable() {
    userd_selectIndex_1 = -1;
    var tableCode = new Array();
    for (var i = 0; i < userd_BoxNo.length; i++) {
        tableCode.push(new Array("LOC: " + userd_LocNo[i], userd_BoxNo[i]));
    }
    ;Table_CreateTable(div_TurnoverBoxNoList_2, new Array(getValue(hide_Lbl_02), getValue(hide_Lbl_05)), tableCode, 7, "singleAction_1", "doubleAction_1", "", false, false);
};

function singleAction_1(id) {
    for (var i = 0; i < userd_LocNo.length; i++) {
        document.getElementById("tr" + i).style.backgroundColor = first_onMouseOut_Color;
    }
    ;userd_selectIndex_1 = id;
    document.getElementById("tr" + id).style.backgroundColor = first_onMouseSelect_Color;
};

function doubleAction_1(id) {
    for (var i = 0; i < userd_LocNo.length; i++) {
        document.getElementById("tr" + i).style.backgroundColor = first_onMouseOut_Color;
    }
    ;userd_selectIndex_1 = id;
    document.getElementById("tr" + id).style.backgroundColor = first_onMouseSelect_Color;
    select_Line_ACTION();
};

function select_Line_ACTION() {
    if (confirm(getValue(hide_Message_05).replace("&1", " " + userd_BoxNo[userd_selectIndex_1] + " "))) {
        setValue(hide_DELETEBOX_2, userd_BoxNo[userd_selectIndex_1]);
        _prevView = _div2Input;
        showViewSingle(_div1Waiting, inViewsKeys);
        doServerAction(className, "deleteBox", QSKeys, deleteBox);
    }
};

function deleteBox(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > lastSEQUpdate6) {
        lastSEQUpdate6 = curSEQ;
        showViewSingle(_div2Input, inViewsKeys);
        if (codeValue_OK == replyData.codeValue) {
            var cartNoValue = getValue2(txt_CartNo_2);
            initHtmlPage();
            LINKTRUNOVERBOX_ACTION();
            setValue(txt_CartNo_2, cartNoValue);
            doCartNoAction();
        } else {
            updateMessageBar(getValue(hide_Message_14).replace("&1", " IDX_PICKTOLIGHT "));
        }
    }
};

function BATCHPREPICKING_ACTION() {
    initHtmlPage();
    showViewSingle(_div3Input, inViewsKeys);
    showLocationInfo();
    autoFocus(sfc_GetNextId("", sfc_Code_3));
};

function showLocationInfo() {
    var locationMessage = new Array();
    for (var i = 0; i < userd_showLocation.length; i++) {
        locationMessage.push(new Array(userd_showLocation[i], userd_showSku[i], userd_showQty[i]));
    }
    ;Table_CreateTable(div_LocationInfoList_3, new Array(getValue(hide_Lbl_02), getValue(hide_Lbl_03), getValue(hide_Lbl_04)), locationMessage, 2, "", "", "", false, false);
};

function txt_TerminalNo_2_Action(id) {
    doTerminalNoAction();
};

function doTerminalNoAction() {
    var terminalNoValue = getValue2(txt_TerminalNo_2);
    if (terminalNoValue.length == 0) {
        autoFocus(txt_TerminalNo_2);
        return;
    }
    ;setValue(hide_TERMINALNO_2, terminalNoValue);
    _prevView = _div2Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "checkTerminalNo", QSKeys, checkTerminalNo);
};

function checkTerminalNo(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > lastSEQUpdate1) {
        lastSEQUpdate1 = curSEQ;
        showViewSingle(_div2Input, inViewsKeys);
        if (codeValue_OK == replyData.codeValue) {
            autoFocus(sfc_GetNextId(txt_TerminalNo_2, sfc_Code_2));
        } else {
            autoFocus("ERROR" + txt_TerminalNo_2);
        }
    }
};

function txt_CartNo_2_Action(id) {
    doCartNoAction();
};

function doCartNoAction() {
    var cartNoValue = getValue2(txt_CartNo_2);
    if (cartNoValue.length == 0) {
        autoFocus(txt_CartNo_2);
        return;
    }
    ;setValue(hide_CARTNO_2, cartNoValue);
    doSpAnalyzerCartNo();
};

function doSpAnalyzerCartNo() {
    _prevView = _div2Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    first_SetNextMusicOff();
    doServerAction(className, "doSpAnalyzerCartNoAction", QSKeys, doSpAnalyzerCartNoAction);
};

function doSpAnalyzerCartNoAction(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            setValue(txt_CartNo_2, returnMessage);
            setValue(hide_CARTNO_2, returnMessage);
            _prevView = _div2Input;
            showViewSingle(_div1Waiting, inViewsKeys);
            doServerAction(className, "findCartInfo", QSKeys, findCartInfo);
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
            autoFocus("ERROR" + txt_CartNo_2);
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function findCartInfo(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > lastSEQUpdate4) {
        userd_BoxNo = new Array();
        userd_LocNo = new Array();
        lastSEQUpdate4 = curSEQ;
        showViewSingle(_div2Input, inViewsKeys);
        if (codeValue_OK == replyData.codeValue) {
            var obj2 = replyData.strData2;
            if (false && obj2[0].PICKTOLOCATION == "#0OTHERCARTNO" && first_EchoMessage(getValue(hide_Message_20).replace("&1", obj2[0].OFFLINETRACEID), first_Confirm, "")) {
                putInfoIntoTable();
                autoFocus(txt_CartNo_2);
            } else {
                for (var i = 0; i < obj2.length; i++) {
                    if (obj2[i].PICKTOLOCATION == "#0OTHERCARTNO") {
                        continue;
                    }
                    ;userd_BoxNo.push(obj2[i].OFFLINETRACEID);
                    userd_LocNo.push(obj2[i].PICKTOLOCATION);
                }
                ;putInfoIntoTable();
                first_PlayMuiscByName("M010", getValue("hide_MusicList"), true);
                autoFocus(sfc_GetNextId(txt_CartNo_2, sfc_Code_2));
            }
        } else {
            putInfoIntoTable();
            autoFocus(sfc_GetNextId(txt_CartNo_2, sfc_Code_2));
        }
    }
};

function txt_TurnoverBoxNo_2_Action(id) {
    doTurnOverBoxNoAction();
};

function doTurnOverBoxNoAction() {
    var turnOverBoxNoValue = getValue2(txt_TurnoverBoxNo_2);
    if (turnOverBoxNoValue.length == 0) {
        autoFocus(txt_TurnoverBoxNo_2);
        return;
    }
    ;setValue(hide_TURNOVERBOXNO_2, turnOverBoxNoValue);
    setValue(hide_TERMINALNO_2, getValue2(txt_TerminalNo_2));
    setValue(hide_CARTNO_2, getValue2(txt_CartNo_2));
    _prevView = _div2Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "linkTurnOverBox", QSKeys, linkTurnOverBox);
};

function linkTurnOverBox(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > lastSEQUpdate2) {
        lastSEQUpdate2 = curSEQ;
        showViewSingle(_div2Input, inViewsKeys);
        if (codeValue_OK == replyData.codeValue) {
            var returnMessage = replyData.mesg;
            if (returnMessage.indexOf("ERROR_STRING_1") == -1) {
                userd_BoxNo[userd_BoxNo.length] = getValue2(txt_TurnoverBoxNo_2);
                userd_LocNo[userd_LocNo.length] = returnMessage;
                putInfoIntoTable();
                setValue(txt_TurnoverBoxNo_2, "");
                setValue(hide_TURNOVERBOXNO_2, "");
                autoFocus("OK" + txt_TurnoverBoxNo_2);
            } else if (returnMessage.indexOf("ERROR_STRING_1") == 0) {
                setFocus(txt_TurnoverBoxNo_2);
                updateMessageBar(returnMessage.replace("ERROR_STRING_1:-->", "").replace("<--", ""));
            } else {
                setFocus(txt_TurnoverBoxNo_2);
                updateMessageBar(returnMessage.replace("ERROR_STRING_2:-->", "").replace("<--", ""));
            }
        } else {
            initHtmlPage();
            updateMessageBar(getValue2(hide_Message_08).replace("&1", " SPRF_BatchPicking "));
        }
    }
};

function but_Complete_2_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_2);
    if (nextId == sfc_Code_2 || userd_BoxNo.length > 0) {
        doButConfirm2Action();
    } else {
        autoFocus(nextId);
    }
};

function doButConfirm2Action() {
    var cartNoValue = getValue2(txt_CartNo_2);
    if (cartNoValue.length == 0) {
        autoFocus(txt_CartNo_2);
        return;
    }
    ;
    if (userd_BoxNo.length == 0) {
        autoFocus(txt_TurnoverBoxNo_2);
        return;
    }
    ;showViewSingle(_div3Input, inViewsKeys);
    setValue(txt_CartNo_3, cartNoValue);
    updateMessageBar("");
    doCartNo3GetInfoAction();
};

function doCartNo3GetInfoAction() {
    var cartNoValue = getValue2(txt_CartNo_3);
    if (cartNoValue.length == 0) {
        autoFocus(txt_CartNo_3);
        return;
    }
    ;setValue(hide_CARTNO_3, cartNoValue);
    userd_Location = new Array();
    userd_Sku = new Array();
    userd_SkuName = new Array();
    userd_CustomerID = new Array();
    userd_Qty = new Array();
    userd_Uom = new Array();
    userd_TurnOverBoxNo = new Array();
    userd_PickToLocation = new Array();
    userd_FmTraceId = new Array();
    userd_WaveNo = new Array();
    userd_showLocation = new Array();
    userd_showSku = new Array();
    userd_showSkuName = new Array();
    userd_showQty = new Array();
    userd_showUom = new Array();
    userd_showTraceId = new Array();
    userd_showUdf1 = new Array();
    userd_showUdf2 = new Array();
    userd_showUdf3 = new Array();
    userd_CustomerId = new Array();
    userd_showUserdefine1 = new Array();
    userd_showUserdefine2 = new Array();
    userd_Ptltaskid = new Array();
    _prevView = _div3Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "getLocationInfo", QSKeys, getLocationInfo);
};

function but_Cancel_2_Action(id) {
    initHtmlPage();
};

function but_QueryCartNo_2_Action(id) {
    var terminalNoValue = getValue2(txt_TerminalNo_2);
    if (terminalNoValue.length == 0) {
        autoFocus(txt_TerminalNo_2);
        return;
    }
    ;setValue(hide_TERMINALNO_2, terminalNoValue);
    _prevView = _div2Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "getCartNoAction", QSKeys, getCartNoAction);
};

function getCartNoAction(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
            setValue(txt_CartNo_2, returnMessage);
            doCartNoAction();
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function txt_CartNo_3_Action(id) {
    doCartNo3Action();
};

function doCartNo3Action() {
    var cartNoValue = getValue2(txt_CartNo_3);
    if (cartNoValue.length == 0) {
        autoFocus(txt_CartNo_3);
        return;
    }
    ;setValue(hide_CARTNO_3, cartNoValue);
    userd_Location = new Array();
    userd_Sku = new Array();
    userd_SkuName = new Array();
    userd_CustomerID = new Array();
    userd_Qty = new Array();
    userd_Uom = new Array();
    userd_TurnOverBoxNo = new Array();
    userd_PickToLocation = new Array();
    userd_FmTraceId = new Array();
    userd_WaveNo = new Array();
    userd_showLocation = new Array();
    userd_showSku = new Array();
    userd_showSkuName = new Array();
    userd_showQty = new Array();
    userd_showUom = new Array();
    userd_showTraceId = new Array();
    userd_showUdf1 = new Array();
    userd_showUdf2 = new Array();
    userd_showUdf3 = new Array();
    userd_CustomerId = new Array();
    userd_showUserdefine1 = new Array();
    userd_showUserdefine2 = new Array();
    userd_Ptltaskid = new Array();
    doSpAnalyzerCartNo2();
};

function doSpAnalyzerCartNo2() {
    _prevView = _div3Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    first_SetNextMusicOff();
    doServerAction(className, "doSpAnalyzerCartNo2Action", QSKeys, doSpAnalyzerCartNo2Action);
};

function doSpAnalyzerCartNo2Action(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            setValue(txt_CartNo_3, returnMessage);
            setValue(hide_CARTNO_3, returnMessage);
            _prevView = _div3Input;
            showViewSingle(_div1Waiting, inViewsKeys);
            doServerAction(className, "getLocationInfo", QSKeys, getLocationInfo);
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
            autoFocus("ERROR" + txt_CartNo_3);
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function getLocationInfo(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > lastSEQUpdate3) {
        lastSEQUpdate3 = curSEQ;
        showViewSingle(_div3Input, inViewsKeys);
        if (codeValue_OK == replyData.codeValue) {
            var obj2 = replyData.strData2;
            if (obj2.length == 0) {
                var cartNoValue = getValue2(txt_CartNo_3);
                initHtmlPage();
                BATCHPREPICKING_ACTION();
                setValue(txt_CartNo_3, cartNoValue);
                autoFocus("ERROR" + txt_CartNo_3);
                return;
            }
            ;
            for (var i = 0; i < obj2.length; i++) {
                if (obj2[i].PICKTOLOCATION != "#0000" || obj2.length > 1) {
                    break;
                }
                ;
                if ((i + 1) == obj2.length) {
                    var cartNoValue = getValue2(txt_CartNo_3);
                    initHtmlPage();
                    BATCHPREPICKING_ACTION();
                    setValue(txt_CartNo_3, cartNoValue);
                    autoFocus("ERROR" + txt_CartNo_3);
                    return;
                }
            }
            ;
            if (obj2[0].PICKTOLOCATION == "#0000" && first_EchoMessage(getValue(hide_Message_20).replace("&1", obj2[0].CARTNO), first_Confirm, "")) {
                var cartNoValue = getValue2(txt_CartNo_3);
                initHtmlPage();
                BATCHPREPICKING_ACTION();
                setValue(txt_CartNo_3, cartNoValue);
                setFocus(txt_CartNo_3);
                return;
            }
            ;addBuffer(obj2);
        } else {
            var obj2 = replyData.strData2;
            if (obj2.indexOf("ERROR_STRING_") == 0) {
                initHtmlPage();
                updateMessageBar(getValue(hide_Message_10).replace("&1", " IDX_PICKTOLIGHT and BAS_LOCATION "));
            } else {
                var cartNoValue = getValue2(txt_CartNo_3);
                initHtmlPage();
                BATCHPREPICKING_ACTION();
                setValue(txt_CartNo_3, cartNoValue);
                autoFocus("ERROR" + txt_CartNo_3);
            }
        }
    }
};

function addBuffer(obj2) {
    for (var i = 0; i < obj2.length; i++) {
        if (obj2[i].PICKTOLOCATION == "#0000") {
            continue;
        }
        ;var locationID = obj2[i].FMLOCATION;
        var sku = obj2[i].SKU;
        var skuName = obj2[i].SKUNAME;
        var customerID = "";
        customerID = obj2[i].CUSTOMERID;
        var qty = obj2[i].FMQTY;
        var uom = obj2[i].UOM;
        var turnOverBoxNo = obj2[i].TURNOVERBOXNO;
        var pickToLocation = obj2[i].PICKTOLOCATION;
        var fmTraceId = obj2[i].FMTRACEID;
        var waveNo = obj2[i].WAVENO;
        var udf1 = obj2[i].UDF1;
        var udf2 = obj2[i].UDF2;
        var udf3 = obj2[i].UDF3;
        var userdefine1 = obj2[i].USERDEFINE1;
        var userdefine2 = obj2[i].USERDEFINE2;
        var PTLTASKID = obj2[i].PTLTASKID;
        userd_Location.push(locationID);
        userd_Sku.push(sku);
        userd_SkuName.push(skuName);
        userd_CustomerID.push(customerID);
        userd_Qty.push(qty);
        userd_Uom.push(uom);
        userd_TurnOverBoxNo.push(turnOverBoxNo);
        userd_PickToLocation.push(pickToLocation);
        userd_FmTraceId.push(fmTraceId);
        userd_WaveNo.push(waveNo);
        userd_Ptltaskid.push(PTLTASKID);
        var index = -1;
        for (var j = 0; j < userd_showLocation.length; j++) {
            if (userd_showLocation[j] == locationID && userd_showTraceId[j] == fmTraceId && userd_showSku[j] == sku && userd_CustomerID[j] == customerID && userd_showUom[j] == uom) {
                index = j;
                break;
            }
        }
        ;
        if (index == -1) {
            userd_showLocation[userd_showLocation.length] = locationID;
            userd_showSku[userd_showSku.length] = sku;
            userd_showSkuName[userd_showSkuName.length] = skuName;
            userd_showQty[userd_showQty.length] = parseFloat(qty);
            userd_showUom[userd_showUom.length] = uom;
            userd_showTraceId[userd_showTraceId.length] = fmTraceId;
            userd_showUdf1[userd_showUdf1.length] = udf1;
            userd_showUdf2[userd_showUdf2.length] = udf2;
            userd_showUdf3[userd_showUdf3.length] = udf3;
            userd_CustomerId[userd_CustomerId.length] = customerID;
            userd_showUserdefine1[userd_showUserdefine1.length] = userdefine1;
            userd_showUserdefine2[userd_showUserdefine2.length] = userdefine2;
        } else {
            userd_showQty[index] = parseFloat(userd_showQty[index]) + parseFloat(qty);
        }
    }
    ;sfc_SetValue(txt_FMLocation_3, userd_showLocation[0], sfc_Code_3);
    sfc_SetValue(wxt_FMLocation_3, userd_showLocation[0], sfc_Code_3);
    sfc_SetValue(wxt_LBLSKU_3, userd_showSku[0], sfc_Code_3);
    sfc_SetValue(wxt_SKUDescr_3, userd_showSkuName[0], sfc_Code_3);
    sfc_SetValue(wxt_FMTraceID_3, userd_showTraceId[0], sfc_Code_3);
    sfc_SetValue(txt_FMTraceID_3, userd_showTraceId[0], sfc_Code_3);
    sfc_SetValue(wxt_SKU_3, userd_showSku[0], sfc_Code_3);
    sfc_SetValue(txt_SKU_3, userd_showSku[0], sfc_Code_3);
    sfc_SetValue(wxt_UDF1_3, userd_showUdf1[0], sfc_Code_3);
    sfc_SetValue(wxt_UDF2_3, userd_showUdf2[0], sfc_Code_3);
    sfc_SetValue(wxt_UDF3_3, userd_showUdf3[0], sfc_Code_3);
    sfc_SetValue(wxt_Userdefine1_3, userd_showUserdefine1[0], sfc_Code_3);
    sfc_SetValue(wxt_Userdefine2_3, userd_showUserdefine2[0], sfc_Code_3);
    sfc_SetValue(wxt_SKU_4, userd_showSku[0], sfc_Code_4);
    sfc_SetValue(wxt_SKUDescr_4, userd_showSkuName[0], sfc_Code_4);
    sfc_SetValue(wxt_Qty_4, userd_showQty[0], sfc_Code_4);
    sfc_SetValue(wxt_AllQty_5, userd_showQty[0], sfc_Code_5);
    setValue(hide_SKU_4, userd_showSku[0]);
    setValue(hide_FMLOCATION_3, userd_showLocation[0].toUpperCase());
    setValue(hide_FMTRACEID_3, userd_showTraceId[0].toUpperCase());
    setValue(hide_customerId_3, userd_CustomerID[0]);
    showLocationInfo();
    first_PlayMuiscByName("M010", getValue("hide_MusicList"), true);
    autoFocus(sfc_GetNextId(txt_CartNo_3, sfc_Code_3));
};

function txt_FMLocation_3_Action(id) {
    doFmLocationAction();
};

function doFmLocationAction() {
    var fmLocationValue = first_GetLocationValue(txt_FMLocation_3);
    if (fmLocationValue.length == 0) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        autoFocus(txt_FMLocation_3);
        return;
    }
    ;var fmLocationLblValue = getValue2(wxt_FMLocation_3);
    if (fmLocationLblValue != fmLocationValue) {
        autoFocus("ERROR1" + txt_FMLocation_3);
        return;
    }
    ;autoFocus(sfc_GetNextId(txt_FMLocation_3, sfc_Code_3));
};

function txt_FMTraceID_3_Action(id) {
    doFmTraceIdAction();
};

function doFmTraceIdAction() {
    var fmTraceIdValue = getValue2(txt_FMTraceID_3);
    if (fmTraceIdValue.length == 0) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        autoFocus(txt_FMTraceID_3);
        return;
    }
    ;
    if (sfc_IsDisPlay(wxt_FMTraceID_3, sfc_Code_3) && fmTraceIdValue != getValue2(wxt_FMTraceID_3)) {
        autoFocus("ERROR1" + txt_FMTraceID_3);
        return;
    }
    ;autoFocus(sfc_GetNextId(txt_FMTraceID_3, sfc_Code_3));
};

function txt_SKU_3_Action(id) {
    doTxtSku3Action();
};

function doTxtSku3Action() {
    var skuValue = getValue2(txt_SKU_3);
    if (skuValue.length == 0) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        autoFocus(txt_SKU_3);
        return;
    }
    ;var paramInfo = new Array("PCK", "", "", getValue2(hide_customerId_3), "", skuValue);
    SkuBarcodeAnalyzer_SetAddWhere(" AND ALLOWSHIPMENT='Y' ");
    SkuBarcodeAnalyzer_AnalyzerSkuBarCode(inViewsKeys, paramInfo, goOnDoTxtSku3Action);
};

function goOnDoTxtSku3Action() {
    var skuInfo = SkuBarcodeAnalyzer_getSkuInfoResult();
    var returnCode = skuInfo[0];
    showViewSingle(_div3Input, inViewsKeys);
    if (returnCode == codeValue_OK) {
        var skuOutput = skuInfo[1];
        setValue(txt_SKU_3, skuOutput);
        var skuValue = getValue2(txt_SKU_3);
        if (skuValue.length == 0) {
            autoFocus(txt_SKU_3);
            return;
        }
        ;var skuValue = getValue2(txt_SKU_3);
        if (sfc_IsDisPlay(wxt_SKU_3, sfc_Code_3) && skuValue != getValue2(wxt_SKU_3)) {
            autoFocus(txt_SKU_3);
            updateMessageBar(hide_Message_36);
            return;
        }
        ;doButConfirm3Action();
    } else if (returnCode == codeValue_NORECORD) {
        setFocus(txt_SKU_3);
        first_EchoMessage(skuInfo[1], first_Alert, "updateMessageBar");
    } else {
        setFocus(txt_SKU_3);
        first_EchoMessage(skuInfo[1], first_Alert, "updateMessageBar");
    }
};var userd_FromPlace = "";

function addSKUAnalyzeProcEndsOKBiz() {
    if (userd_FromPlace == "DIV_3_SKU") {
    } else if (userd_FromPlace == "DIV_5_SKU") {
    }
    ;userd_FromPlace = "";
};

function but_Confirm_3_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_3);
    if (nextId == sfc_Code_3) {
        doButConfirm3Action();
    } else {
        autoFocus(nextId);
    }
};

function doButConfirm3Action() {
    var cartNoValue = getValue2(txt_CartNo_3);
    if (cartNoValue.length == 0) {
        first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
        autoFocus(txt_CartNo_3);
        return;
    }
    ;var fmLocationValue = first_GetLocationValue(txt_FMLocation_3);
    if (sfc_IsDisPlay(txt_FMLocation_3, sfc_Code_3)) {
        if (fmLocationValue.length == 0) {
            first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
            autoFocus(txt_FMLocation_3);
        } else if (sfc_IsDisPlay(wxt_FMLocation_3, sfc_Code_3) && fmLocationValue != getValue2(wxt_FMLocation_3)) {
            autoFocus("ERROR1" + txt_FMLocation_3);
            return;
        }
    }
    ;var fmTraceIdValue = getValue2(txt_FMTraceID_3);
    if (sfc_IsDisPlay(txt_FMTraceID_3, sfc_Code_3)) {
        if (fmTraceIdValue.length == 0) {
            first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
            autoFocus(txt_FMTraceID_3);
        } else if (sfc_IsDisPlay(wxt_FMTraceID_3, sfc_Code_3) && fmTraceIdValue != getValue2(wxt_FMTraceID_3)) {
            autoFocus("ERROR1" + txt_FMTraceID_3);
            return;
        }
    }
    ;var skuValue = getValue2(txt_SKU_3);
    if (sfc_IsDisPlay(txt_SKU_3, sfc_Code_3)) {
        if (skuValue.length == 0) {
            first_PlayMuiscByName("M010", getValue("hide_MusicList"), false);
            autoFocus(txt_SKU_3);
        } else if (sfc_IsDisPlay(wxt_SKU_3, sfc_Code_3) && skuValue != getValue2(wxt_SKU_3)) {
            autoFocus("ERROR" + txt_SKU_3);
            return;
        }
    }
    ;var reason = "LOCATION";
    for (var i = 0; i < userd_showLocation.length; i++) {
        if (userd_showLocation[i] == fmLocationValue && userd_showQty[i] != 0 && userd_showLocation[i] == userd_showLocation[0]) {
            if (fmTraceIdValue.length > 0) {
                reason = reason.replace("LOCATION", "FMTRACEID");
            }
            ;
            if ((userd_FmTraceId[i] == fmTraceIdValue && userd_FmTraceId[i] == userd_FmTraceId[0]) || fmTraceIdValue.length == 0) {
                if (skuValue.length > 0) {
                    reason = reason.replace("LOCATION", "SKU").replace("FMTRACEID", "SKU");
                }
                ;
                if (userd_showSku[i] == skuValue || skuValue.length == 0) {
                    reason = reason.replace("LOCATION", "OK").replace("FMTRACEID", "OK").replace("SKU", "OK");
                    setValue(hide_FMLOCATION_3, userd_showLocation[i]);
                    setValue(hide_FMTRACEID_3, userd_FmTraceId[i]);
                    setValue(hide_SKU_4, userd_showSku[i]);
                    sfc_SetValue(wxt_SKU_4, userd_showSku[i], sfc_Code_4);
                    sfc_SetValue(wxt_SKUDescr_4, userd_showSkuName[i], sfc_Code_4);
                    sfc_SetValue(wxt_Qty_4, userd_showQty[i], sfc_Code_4);
                    sfc_SetValue(wxt_AllQty_5, userd_showQty[i], sfc_Code_5);
                    break;
                }
            }
        }
    }
    ;
    if (reason == "SKU") {
        startMusic();
        first_EchoMessage(getValue(hide_Message_23), first_Alert, "");
        autoFocus("ERROR" + txt_SKU_3);
        return;
    } else if (reason == "FMTRACEID") {
        autoFocus("ERROR2" + txt_FMTraceID_3);
        return;
    } else if (reason == "LOCATION") {
        startMusic();
        autoFocus("ERROR2" + txt_FMLocation_3);
        return;
    }
    ;userd_QTY_index_Array = new Array();
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        userd_QTY_index_Array[parseInt(userd_PickToLocation[i].replace("#", ""), 10)] = 0;
    }
    ;var PCK_INV_COU = getValue(hide_PCK_INV_COU);
    if ((PCK_INV_COU == "1" || PCK_INV_COU == "2")) {
        doSeachAction();
        return;
    }
    ;setValue(wxt_Qty_5, "0");
    setValue(wxt_SKUDescr_5, "");
    showViewSingle(_div4Input, inViewsKeys);
    var qtyJson = {
        "options": [{"UDF01": "1", "UDF02": "1"}, {"UDF01": "10", "UDF02": "10"}, {
            "UDF01": "100",
            "UDF02": "100"
        }, {"UDF01": "1000", "UDF02": "1000"}, {"UDF01": "MAN", "UDF02": "MAN"}]
    };
    changeOptions(cmb_PerCutQty_4, qtyJson.options, "1", false);
    autoFocus(but_Confirm_4);
    setValue(hide_FMLOCATION_3, fmLocationValue);
    showBoxTable();
};

function doSeachAction() {
    _prevView = _div3Input;
    doServerAction(className, "searchInvenQtyAction", QSKeys, searchInvenQty);
};

function searchInvenQty(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            var obj1 = replyData.strData1;
            totalQty = obj1.INVENQTY;
            if (totalQty == null) {
                totalQty = 0;
            }
            ;setValue(HIDE_INVENQTY_3, totalQty);
            var fmLocationValue = first_GetLocationValue(txt_FMLocation_3);
            setValue(wxt_Qty_5, "0");
            setValue(wxt_SKUDescr_5, "");
            showViewSingle(_div4Input, inViewsKeys);
            var qtyJson = {
                "options": [{"UDF01": "1", "UDF02": "1"}, {"UDF01": "10", "UDF02": "10"}, {
                    "UDF01": "100",
                    "UDF02": "100"
                }, {"UDF01": "1000", "UDF02": "1000"}, {"UDF01": "MAN", "UDF02": "MAN"}]
            };
            changeOptions(cmb_PerCutQty_4, qtyJson.options, "1", false);
            autoFocus(but_Confirm_4);
            setValue(hide_FMLOCATION_3, fmLocationValue);
            showBoxTable();
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
            updateMessageBar(hide_Message_17);
            return;
        } else {
            showViewSingle(_prevView, inViewsKeys);
            updateMessageBar(returnMessage);
            return;
        }
    }
};

function showBoxTable() {
    var tableMessage = "";
    var smallTable = "";
    var bigTableWidth = "80%";
    var bigTableHeight = 65;
    var smallTableWidth = "100%";
    var smallTableHeight = bigTableHeight - 5;
    var smallTableUpHeight = 50;
    var smallTableDNHeight = 10;
    smallTable = "";
    smallTable += "<table width='" + smallTableWidth + "' height='" + smallTableHeight + "' border='0' cellpadding='0' cellspacing='0'>";
    smallTable += "<tr height='" + smallTableUpHeight + "' align='center' valign='middle'><td id='&id1' onclick='clickAction(id)' ondblclick='doubleClickAction(id)'>&qty</td></tr>";
    smallTable += "<tr height='" + smallTableDNHeight + "' align='center' valign='middle'><td id='&id2' onclick='clickAction(id)' ondblclick='doubleClickAction(id)'>&loc</td></tr>";
    smallTable += "</table>";
    var MLT_PCK_TYP = getValue(hide_MLT_PCK_TYP);
    if (MLT_PCK_TYP == "A") {
        tableMessage = "";
        tableMessage += "<table width='" + bigTableWidth + "' height='" + bigTableHeight + "' border='1' align='center'>";
        tableMessage += "<tr height='100%'><td width='50%' align='center' valign='middle'>&1</td><td width='50%' align='center' valign='middle'>&2</td></tr>";
        tableMessage += "</table>";
        tableMessage = tableMessage.replace("&1", smallTable.replace("&id1", "qty1").replace("&id2", "loc1").replace("&qty", "<label id='LBL_LOC1_QTY'></label>").replace("&loc", "<label id='LBL_LOC_1' style='font-size:1.0em;'></label>")).replace("&2", smallTable.replace("&id1", "qty2").replace("&id2", "loc2").replace("&qty", "<label id='LBL_LOC2_QTY'></label>").replace("&loc", "<label id='LBL_LOC_2' style='font-size:1.0em;'></label>"));
    } else if (MLT_PCK_TYP == "B") {
        tableMessage = "";
        tableMessage += "<table width='" + bigTableWidth + "' height='" + (bigTableHeight * 2) + "' border='1' align='center'>";
        tableMessage += "<tr height='50%'><td width='100%' align='center' valign='middle'>&1</td></tr>";
        tableMessage += "<tr height='50%'><td width='100%' align='center' valign='middle'>&2</td></tr>";
        tableMessage += "</table>";
        tableMessage = tableMessage.replace("&1", smallTable.replace("&id1", "qty1").replace("&id2", "loc1").replace("&qty", "<label id='LBL_LOC1_QTY'></label>").replace("&loc", "<label id='LBL_LOC_1' style='font-size:1.0em;'></label>")).replace("&2", smallTable.replace("&id1", "qty2").replace("&id2", "loc2").replace("&qty", "<label id='LBL_LOC2_QTY'></label>").replace("&loc", "<label id='LBL_LOC_2' style='font-size:1.0em;'></label>"));
    } else if (MLT_PCK_TYP == "C") {
        tableMessage = "";
        tableMessage += "<table width='" + bigTableWidth + "' height='" + (bigTableHeight * 2) + "' border='1' align='center'>";
        tableMessage += "<tr height='50%'><td width='50%' align='center' valign='middle'>&1</td><td width='50%' align='center' valign='middle'>&2</td></tr>";
        tableMessage += "<tr height='50%'><td width='50%' align='center' valign='middle'>&3</td><td width='50%' align='center' valign='middle'>&4</td></tr>";
        tableMessage += "</table>";
        tableMessage = tableMessage.replace("&1", smallTable.replace("&id1", "qty1").replace("&id2", "loc1").replace("&qty", "<label id='LBL_LOC1_QTY'></label>").replace("&loc", "<label id='LBL_LOC_1' style='font-size:1.0em;'></label>")).replace("&2", smallTable.replace("&id1", "qty2").replace("&id2", "loc2").replace("&qty", "<label id='LBL_LOC2_QTY'></label>").replace("&loc", "<label id='LBL_LOC_2' style='font-size:1.0em;'></label>")).replace("&3", smallTable.replace("&id1", "qty3").replace("&id2", "loc3").replace("&qty", "<label id='LBL_LOC3_QTY'></label>").replace("&loc", "<label id='LBL_LOC_3' style='font-size:1.0em;'></label>")).replace("&4", smallTable.replace("&id1", "qty4").replace("&id2", "loc4").replace("&qty", "<label id='LBL_LOC4_QTY'></label>").replace("&loc", "<label id='LBL_LOC_4' style='font-size:1.0em;'></label>"));
    } else if (MLT_PCK_TYP == "LIST") {
        showBoxInfo2();
        return;
    } else {
        initHtmlPage();
        updateMessageBar("error: MLT_PCK_TYP");
        alert("error: MLT_PCK_TYP");
    }
    ;var PCK_PCS_SCN = getValue(hide_PCK_PCS_SCN);
    if (PCK_PCS_SCN != "Y") {
        setInnerHTML2(div_BoxInfoList_4, tableMessage);
    } else {
        setInnerHTML2(div_BoxInfoList_5, tableMessage);
    }
    ;showBoxInfo();
};

function showBoxInfo() {
    var fontSize = 6;
    setInnerHTML2(LBL_LOC_1, "&nbsp;");
    setInnerHTML2(LBL_LOC_2, "&nbsp;");
    setInnerHTML2(LBL_LOC_3, "&nbsp;");
    setInnerHTML2(LBL_LOC_4, "&nbsp;");
    setInnerHTML2(LBL_LOC1_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
    setInnerHTML2(LBL_LOC2_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
    setInnerHTML2(LBL_LOC3_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
    setInnerHTML2(LBL_LOC4_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
    var tabelSize = 0;
    var MLT_PCK_TYP = getValue(hide_MLT_PCK_TYP);
    if (MLT_PCK_TYP == "A") tabelSize = 3; else if (MLT_PCK_TYP == "B") tabelSize = 3; else if (MLT_PCK_TYP == "C") tabelSize = 5;
    for (var i = 1; i < tabelSize; i++) {
        changeColor(i, userd_Color_4);
    }
    ;
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        if (userd_PickToLocation[i] == "#1") {
            setInnerHTML2(LBL_LOC_1, userd_TurnOverBoxNo[i]);
            setInnerHTML2(LBL_LOC1_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
            changeColor(1, userd_Color_2);
        } else if (userd_PickToLocation[i] == "#2") {
            setInnerHTML2(LBL_LOC_2, userd_TurnOverBoxNo[i]);
            setInnerHTML2(LBL_LOC2_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
            changeColor(2, userd_Color_2);
        } else if (userd_PickToLocation[i] == "#3") {
            setInnerHTML2(LBL_LOC_3, userd_TurnOverBoxNo[i]);
            setInnerHTML2(LBL_LOC3_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
            changeColor(3, userd_Color_2);
        } else if (userd_PickToLocation[i] == "#4") {
            setInnerHTML2(LBL_LOC_4, userd_TurnOverBoxNo[i]);
            setInnerHTML2(LBL_LOC4_QTY, "<font size='" + fontSize + "'>&nbsp;</font>");
            changeColor(4, userd_Color_2);
        }
    }
    ;var fmLocationValue = getValue2(hide_FMLOCATION_3);
    var fmTraceIdValue = getValue2(hide_FMTRACEID_3);
    var skuValue = getValue2(hide_SKU_4);
    for (var i = 0; i < userd_Location.length; i++) {
        if (userd_Location[i] == fmLocationValue) {
            var qtys = new Array();
            for (var j = 1; j < userd_QTY_index_Array.length; j++) {
                qtys[j] = parseFloat(userd_Qty[i]) - parseFloat(userd_QTY_index_Array[j]);
            }
            ;var qty_1 = qtys[1];
            var qty_2 = qtys[2];
            var qty_3 = qtys[3];
            var qty_4 = qtys[4];
            if (userd_PickToLocation[i] == "#1" && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
                setInnerHTML2(LBL_LOC1_QTY, "<font size='" + fontSize + "'>" + qty_1 + "</font>");
                if (qty_1 > 0) {
                    changeColor("1", userd_Color_1);
                } else {
                    changeColor("1", userd_Color_3);
                }
            } else if (userd_PickToLocation[i] == "#2" && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
                setInnerHTML2(LBL_LOC2_QTY, "<font size='" + fontSize + "'>" + qty_2 + "</font>");
                if (qty_2 > 0) {
                    changeColor("2", userd_Color_1);
                } else {
                    changeColor("2", userd_Color_3);
                }
            } else if (userd_PickToLocation[i] == "#3" && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
                setInnerHTML2(LBL_LOC3_QTY, "<font size='" + fontSize + "'>" + qty_3 + "</font>");
                if (qty_3 > 0) {
                    changeColor("3", userd_Color_1);
                } else {
                    changeColor("3", userd_Color_3);
                }
            } else if (userd_PickToLocation[i] == "#4" && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
                setInnerHTML2(LBL_LOC4_QTY, "<font size='" + fontSize + "'>" + qty_4 + "</font>");
                if (qty_4 > 0) {
                    changeColor("4", userd_Color_1);
                } else {
                    changeColor("4", userd_Color_3);
                }
            }
        }
    }
    ;var PCK_PCS_SCN = getValue(hide_PCK_PCS_SCN);
    if (PCK_PCS_SCN == "Y") {
        but_ScanByEach_Action();
    }
};

function changeColor(index, color) {
    var qtyObj = document.getElementById("qty" + index);
    var locObj = document.getElementById("loc" + index);
    if (qtyObj != null) {
        qtyObj.style.backgroundColor = color;
    }
    ;
    if (locObj != null) {
        locObj.style.backgroundColor = color;
    }
};

function showBoxInfo2() {
    var fontSize = 2;
    var fmLocationValue = getValue2(hide_FMLOCATION_3);
    var fmTraceIdValue = getValue2(hide_FMTRACEID_3);
    var skuValue = getValue2(hide_SKU_4);
    var sumLine = 0;
    var pickToLocation_Array = new Array();
    var pcikToQty = new Array();
    var trunOverBox_Array = new Array();
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        if (fmLocationValue == userd_Location[i] && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
            if (pcikToQty[parseInt(userd_PickToLocation[i].replace("#", ""), 10)] == null || pcikToQty[parseInt(userd_PickToLocation[i].replace("#", ""), 10)].length == 0) {
                pickToLocation_Array[parseInt(userd_PickToLocation[i].replace("#", ""), 10)] = userd_PickToLocation[i];
                trunOverBox_Array[parseInt(userd_PickToLocation[i].replace("#", ""), 10)] = userd_TurnOverBoxNo[i];
                pcikToQty[parseInt(userd_PickToLocation[i].replace("#", ""), 10)] = userd_Qty[i];
            }
        } else {
        }
    }
    ;var tableMessage = "<table class='table1' width='100%' cellpadding='0' cellspacing='0'>";
    tableMessage += "<tr>";
    tableMessage += "<th width='50%'><font color='red' size='" + fontSize + "'>&nbsp;&nbsp;PTL</font></th>";
    tableMessage += "<th width='50%'><font color='red' size='" + fontSize + "'>&nbsp;&nbsp;Qty</font></th>";
    tableMessage += "</tr>";
    for (var i = 0; i <= pickToLocation_Array.length; i++) {
        if (pickToLocation_Array[i] != null && pickToLocation_Array[i].length != 0) {
            var index = pickToLocation_Array[i].replace("#", "");
            var turnOverBox = trunOverBox_Array[i];
            if (turnOverBox.length == 0) {
                turnOverBox = "#" + index;
            }
            ;tableMessage += "<tr>";
            tableMessage += "<td width='50%' id='loc" + index + "' onclick='clickAction(id)' ondblclick='doubleClickAction(id)'><font size='" + fontSize + "'>" + turnOverBox + "</font></td>";
            tableMessage += "<td width='50%' id='qty" + index + "' onclick='clickAction(id)' ondblclick='doubleClickAction(id)'><font size='" + fontSize + "'>&qty" + index + "</font></td>";
            tableMessage += "</tr>";
            sumLine++;
        }
    }
    ;
    for (var i = 0; i < pcikToQty.length; i++) {
        if (pcikToQty[i] != null && pcikToQty[i].length != 0) {
            var oldText = "&qty" + pickToLocation_Array[i].replace("#", "");
            var newText = parseFloat(pcikToQty[i]) - parseFloat(userd_QTY_index_Array[parseInt(pickToLocation_Array[i].replace("#", ""))]) + "";
            tableMessage = tableMessage.replace(oldText, newText);
        }
    }
    ;
    for (var i = 0; i < 7 - sumLine; i++) {
        tableMessage += "<tr bgcolor='" + userd_Color_3 + "'><td><font size='" + fontSize + "'>&nbsp;</font></td><td><font size='" + fontSize + "'>&nbsp;</font></td></tr>";
    }
    ;tableMessage += "</table>";
    var PCK_PCS_SCN = getValue(hide_PCK_PCS_SCN);
    if (PCK_PCS_SCN != "Y") {
        setInnerHTML2(div_BoxInfoList_4, tableMessage);
    } else {
        setInnerHTML2(div_BoxInfoList_5, tableMessage);
    }
    ;
    for (var i = 0; i < pcikToQty.length; i++) {
        if (pcikToQty[i] != null && pcikToQty[i].length != 0) {
            var qty = parseFloat(pcikToQty[i]) - parseFloat(userd_QTY_index_Array[parseInt(pickToLocation_Array[i].replace("#", ""))]) + "";
            if (parseFloat(qty) > 0) {
                changeColor(pickToLocation_Array[i].replace("#", ""), userd_Color_1);
            } else {
                changeColor(pickToLocation_Array[i].replace("#", ""), userd_Color_3);
            }
        }
    }
    ;
    if (PCK_PCS_SCN == "Y") {
        but_ScanByEach_Action();
    }
    ;
    return;
};

function but_ScanByEach_Action() {
    var qtyValue = getValue2(wxt_Qty_4);
    if (isNumber(qtyValue)) {
        userd_MaxScanQty = qtyValue;
    }
    ;showViewSingle(_div5Input, inViewsKeys);
    setValue(wxt_SKUDescr_5, getValue2(wxt_SKUDescr_4));
    autoFocus(txt_SKU_5);
    updateMessageBar("");
};

function but_Cancel_3_Action(id) {
    if (userd_FromCombiningCart_Id != null && userd_FromCombiningCart_Id.length > 0) {
        window.location.href = webRoot + "/rfbiz/invbound/combiningcart/CombiningCart.jsp?ID=" + userd_FromCombiningCart_Id + "&AREA=" + userd_FromCombiningCart_Area + "&temUseBack=" + userd_FromCombiningCart_TemUseBack + "&TASKTYPE=" + getValue(hide_TaskType_FromCombingCart_1) + "&PICKTOTRACEIDLIST=" + userd_FromCombiningCart_List + "&_I004=" + encodeURIComponent(getSIdValue("_I004"));
        return;
    }
    ;var cartNoValue = getValue2(txt_CartNo_2);
    if (cartNoValue.length != 0) {
        showViewSingle(_div2Input, inViewsKeys);
        autoFocus(sfc_GetNextId(txt_CartNo_2, sfc_Code_2));
        updateMessageBar("");
    } else {
        initHtmlPage();
        autoFocus(but_BatchPrePicking_1);
    }
};

function but_StockOut_3_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_3);
    if (nextId == sfc_Code_3) {
        doButStockOut3Action();
    } else {
        autoFocus(nextId);
    }
};

function doButStockOut3Action() {
    userd_QTY_index_Array = new Array();
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        userd_QTY_index_Array[parseInt(userd_PickToLocation[i].replace("#", ""), 10)] = 0;
    }
    ;var updateData = "";
    for (var i = 1; i < userd_QTY_index_Array.length; i++) {
        updateData += "&BOX" + i + ":&QTY" + i + ";";
    }
    ;setValue(hide_BOX_QTY_4, updateData);
    var fmLocationValue = getValue2(hide_FMLOCATION_3);
    var skuValue = getValue2(wxt_LBLSKU_3);
    setValue(hide_SKU_4, skuValue);
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        if (userd_Location[i] == fmLocationValue && userd_FmTraceId[i] == userd_FmTraceId[0] && userd_Sku[i] == skuValue) {
            setValue(hide_BOX_QTY_4, getValue2(hide_BOX_QTY_4).replace("&BOX" + parseInt(userd_PickToLocation[i].replace("#", ""), 10), userd_TurnOverBoxNo[i] + "_BOXANDWAVENO_" + userd_WaveNo[i] + "_PTLTASKID_" + userd_Ptltaskid[i] + "_ANDTRACEID_" + userd_FmTraceId[i]));
        }
    }
    ;
    for (var i = 0; i < userd_Location.length; i++) {
        if (userd_Location[i] == fmLocationValue) {
            setValue(hide_BOX_QTY_4, getValue2(hide_BOX_QTY_4).replace("&QTY" + parseInt(userd_PickToLocation[i].replace("#", ""), 10), 0));
        }
    }
    ;
    for (var i = 1; i < userd_QTY_index_Array.length; i++) {
        setValue(hide_BOX_QTY_4, getValue(hide_BOX_QTY_4).replace("&BOX" + i + ":&QTY" + i + ";", ""));
    }
    ;_prevView = _div4Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "updateBoxQty", QSKeys, updateBoxQty);
};

function but_SplitCarton_3_Action(id) {
    var fmLocationValue = getValue2(wxt_FMLocation_3);
    var fmTraceIdValue = getValue2(wxt_FMTraceID_3);
    if (fmLocationValue.length == 0 || fmTraceIdValue.length == 0) {
        autoFocus("ERROR" + but_SplitCarton_3);
        return;
    } else {
        setValue(hide_FMLOCATION_3, fmLocationValue);
        setValue(hide_FMTRACEID_3, fmTraceIdValue);
    }
    ;_prevView = _div3Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "getCartionListAction", QSKeys, getCartionListAction);
};

function getCartionListAction(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            var obj2 = replyData.strData2;
            userd_SplitCartonList_7 = obj2;
            userd_ScanCartonList_7 = new Array();
            showPageSevenAction();
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
            autoFocus("ERROR" + but_SplitCarton_3);
            return;
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function but_RelatingFmLocatin_3_Action(id) {
    if (getValue2(wxt_FMLocation_3).length > 0) {
        setValue(hide_XLocationId_3, getValue2(wxt_FMLocation_3));
        _prevView = _div3Input;
        showViewSingle(_div1Waiting, inViewsKeys);
        doServerAction(className, "getRelatingLocationInfoAction", QSKeys, getRelatingLocationInfoAction);
    }
};

function getRelatingLocationInfoAction(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            var obj2 = replyData.strData2;
            userd_XLocationShwList_6 = new Array();
            for (var i = 0; i < obj2.length; i++) {
                userd_XLocationShwList_6.push(new Array(getValue2(hide_XLocationId_3), obj2[i].CHILDLOCATION));
            }
            ;showViewSingle(_div6Input, inViewsKeys);
            showPage6Table();
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_div3Input, inViewsKeys);
            autoFocus(but_RelatingFmLocatin_3);
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function cmb_PerCutQty_4_Action(id) {
    var cmbPerCutQtyValue = getValue(cmb_PerCutQty_4);
    if (!sfc_IsDisPlay(txt_PerCutQty_4, sfc_Code_4)) {
        return;
    }
    ;
    if (cmbPerCutQtyValue == "MAN") {
        sfc_SetValue(txt_PerCutQty_4, "", sfc_Code_4);
        setDisabled(txt_PerCutQty_4, false);
        setFocus(txt_PerCutQty_4);
    } else {
        sfc_SetValue(txt_PerCutQty_4, "", sfc_Code_4);
        setDisabled(txt_PerCutQty_4, true);
    }
};

function but_Confirm_4_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_4);
    if (nextId == sfc_Code_4) {
        doButConfirm4Action();
    } else {
        autoFocus(nextId);
    }
};

function doButConfirm4Action() {
    var sumPickQty = 0;
    var updateData = "";
    for (var i = 1; i < userd_QTY_index_Array.length; i++) {
        updateData += "&BOX" + i + ":&QTY" + i + ";";
    }
    ;setValue(hide_BOX_QTY_4, updateData);
    var fmLocationValue = getValue2(hide_FMLOCATION_3);
    var fmTraceIdValue = getValue2(hide_FMTRACEID_3);
    var skuValue = getValue2(hide_SKU_4);
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        if (userd_Location[i] == fmLocationValue && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
            setValue(hide_BOX_QTY_4, getValue2(hide_BOX_QTY_4).replace("&BOX" + parseInt(userd_PickToLocation[i].replace("#", ""), 10), userd_TurnOverBoxNo[i] + "_BOXANDWAVENO_" + userd_WaveNo[i] + "_PTLTASKID_" + userd_Ptltaskid[i] + "_ANDTRACEID_" + userd_FmTraceId[i]));
        }
    }
    ;
    for (var i = 0; i < userd_Location.length; i++) {
        if (userd_Location[i] == fmLocationValue && userd_Sku[i] == skuValue && userd_FmTraceId[i] == fmTraceIdValue) {
            var qtys = new Array();
            for (var j = 1; j < userd_QTY_index_Array.length; j++) {
                qtys[j] = parseFloat(userd_Qty[i]) - parseFloat(userd_QTY_index_Array[j]);
            }
            ;setValue(hide_BOX_QTY_4, getValue2(hide_BOX_QTY_4).replace("&QTY" + parseInt(userd_PickToLocation[i].replace("#", ""), 10), qtys[parseInt(userd_PickToLocation[i].replace("#", ""), 10)]));
            sumPickQty += parseInt(qtys[parseInt(userd_PickToLocation[i].replace("#", ""), 10)]);
        }
    }
    ;
    for (var i = 1; i < userd_QTY_index_Array.length; i++) {
        setValue(hide_BOX_QTY_4, getValue(hide_BOX_QTY_4).replace("&BOX" + i + ":&QTY" + i + ";", ""));
    }
    ;userd_LastFmLocationId = first_GetLocationValue(txt_FMLocation_3);
    var scanQtyValue = getValue2(wxt_Qty_4);
    if (scanQtyValue.indexOf("S:") >= 0 && sumPickQty != parseInt(scanQtyValue.replace("S:", ""))) {
        first_EchoMessage(getValue(hide_Message_25).replace("&1", scanQtyValue.replace("S:", "")).replace("&2", sumPickQty), first_Alert, "");
        setFocus(txt_SKU_5);
        return;
    }
    ;var CHECKINVEN = 0;
    var PCK_INV_COU = getValue(hide_PCK_INV_COU);
    if ((PCK_INV_COU == "1" || PCK_INV_COU == "2")) {
        var totalQty = getValue(HIDE_INVENQTY_3);
        var qty = getValue(txt_Banlance_4);
        var invebQty = sumPickQty;
        if (totalQty == null) {
            totalQty = 0;
        }
        ;
        if (PCK_INV_COU == "1") {
            if (!first_CheckNumber(qty)) {
                updateMessageBar(hide_Message_32);
                setFocus(txt_Banlance_4);
                return;
            }
            ;
            if (parseInt(qty) == 0) {
                updateMessageBar(hide_Message_35);
                setFocus(txt_Banlance_4);
                return;
            }
            ;var checkTotle = parseFloat(invebQty) + (parseFloat(qty));
            if (parseFloat(checkTotle) != parseFloat(totalQty)) {
                CHECKINVEN = 1;
            } else {
                CHECKINVEN = 0;
            }
        } else if (PCK_INV_COU == "2") {
            CHECKINVEN = 0;
            if (!first_CheckNumber(qty)) {
                updateMessageBar(hide_Message_32);
                setFocus(txt_Banlance_4);
                return;
            }
            ;
            if (parseInt(qty) == 0) {
                updateMessageBar(hide_Message_35);
                setFocus(txt_Banlance_4);
                return;
            }
            ;var checkTotle = parseFloat(invebQty) + (parseFloat(qty));
            if (parseFloat(checkTotle) != parseFloat(totalQty)) {
                checkTotalInput++;
                if (checkTotalInput == 1) {
                    updateMessageBar(getValue(hide_Message_33).replace("&1", ""));
                    return;
                } else {
                    CHECKINVEN = 1;
                }
            } else {
                updateMessageBar("");
                CHECKINVEN = 0;
            }
        }
    }
    ;setValue(HIDE_CHECKINVEN_4, CHECKINVEN);
    _prevView = _div4Input;
    showViewSingle(_div1Waiting, inViewsKeys, getValue(hide_Lbl_06) + (userd_showLocation.length > 1 ? userd_showLocation[1] : "END"));
    doServerAction(className, "updateBoxQty", QSKeys, updateBoxQty);
};

function updateBoxQty(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > lastSEQUpdate5) {
        lastSEQUpdate5 = curSEQ;
        showViewSingle(_div4Input, inViewsKeys);
        if (codeValue_OK == replyData.codeValue) {
            var cartNoValue = getValue2(txt_CartNo_3);
            var obj2 = replyData.strData2;
            initHtmlPage();
            if (replyData.mesg == "COUNTEROOR") {
                updateMessageBar(getValue(hide_Message_34));
            }
            ;
            if (obj2.length == 0) {
                updateMessageBar(hide_Message_15);
                return;
            }
            ;
            for (var i = 0; i < obj2.length; i++) {
                if (obj2[i].PICKTOLOCATION != "#0000" || obj2.length > 1) {
                    break;
                }
                ;
                if ((i + 1) == obj2.length) {
                    updateMessageBar(hide_Message_15);
                    return;
                }
            }
            ;setValue(txt_CartNo_3, cartNoValue);
            setValue(hide_CARTNO_3, cartNoValue);
            showViewSingle(_div3Input, inViewsKeys);
            addBuffer(obj2);
        } else {
            showViewSingle(_div3Input, inViewsKeys);
            updateMessageBar(getValue(hide_Message_14).replace("&1", " IDX_PICKTOLIGHT "));
        }
    }
};

function but_Cancel_4_Action(id) {
    showViewSingle(_div3Input, inViewsKeys);
    autoFocus(sfc_GetNextId(txt_CartNo_3, sfc_Code_3));
};

function clickAction(id) {
    userd_PerSumQty_id = id;
    var cmbPerCutQtyValue = getValue(cmb_PerCutQty_4);
    if (cmbPerCutQtyValue == "MAN") {
        var txtPerCutQtyValue = getValue(txt_PerCutQty_4);
        if (txtPerCutQtyValue == null || txtPerCutQtyValue.length == 0 || !first_IsInt(txtPerCutQtyValue)) {
            setDisabled(txt_PerCutQty_4, false);
            updateMessageBar(hide_Message_32);
            setFocus(txt_PerCutQty_4);
            return;
        }
        ;
        if (parseInt(qty) == 0) {
            setDisabled(txt_PerCutQty_4, false);
            updateMessageBar(hide_Message_35);
            setFocus(txt_Banlance_4);
            return;
        }
        ;userd_PerSumQty = parseInt(txtPerCutQtyValue);
    } else {
        userd_PerSumQty = parseInt(cmbPerCutQtyValue);
    }
    ;var clearQtyValue = getValue2(chk_ClearQty_4);
    var index = id.replace("qty", "").replace("loc", "");
    var MLT_PCK_TYP = getValue(hide_MLT_PCK_TYP);
    var pickToLocation = "#" + index;
    for (var i = 0; i < userd_PickToLocation.length; i++) {
        if (userd_PickToLocation[i] == pickToLocation && userd_Location[i] == getValue2(hide_FMLOCATION_3)) {
            if (parseFloat(userd_Qty[i]) > 0) {
                if (clearQtyValue == "Y") {
                    userd_QTY_index_Array[parseInt(index)] = parseFloat(userd_Qty[i]);
                } else if (parseFloat(userd_Qty[i]) >= userd_QTY_index_Array[parseInt(index)] + userd_PerSumQty) {
                    userd_QTY_index_Array[parseInt(index)] += userd_PerSumQty;
                } else if (parseFloat(userd_Qty[i]) != userd_QTY_index_Array[parseInt(index)]) {
                    userd_QTY_index_Array[parseInt(index)] = parseFloat(userd_Qty[i]);
                } else {
                    userd_QTY_index_Array[parseInt(index)] = 0;
                }
            }
            ;
            if (MLT_PCK_TYP == "A" || MLT_PCK_TYP == "B" || MLT_PCK_TYP == "C") {
                showBoxInfo();
            } else {
                showBoxInfo2();
            }
            ;
            break;
        }
    }
};

function quickKey(event) {
    if (event.keyCode == 13) {
        doButConfirm4Action();
    }
};

function doubleClickAction(id) {
};

function txt_SKU_5_Action(id) {
    doTxtSku5Action();
};

function doTxtSku5Action() {
    var skuValue = getValue2(txt_SKU_5);
    if (skuValue.length == 0) {
        autoFocus(txt_SKU_5);
        return;
    }
    ;var paramInfo = new Array("PCK", "", "", getValue2(hide_customerId_3), "", skuValue);
    SkuBarcodeAnalyzer_SetAddWhere(" AND ALLOWSHIPMENT='Y' ");
    SkuBarcodeAnalyzer_AnalyzerSkuBarCode(inViewsKeys, paramInfo, goOnDoTxtSku5Action);
};

function goOnDoTxtSku5Action() {
    var skuInfo = SkuBarcodeAnalyzer_getSkuInfoResult();
    var returnCode = skuInfo[0];
    showViewSingle(_div5Input, inViewsKeys);
    if (returnCode == codeValue_OK) {
        var skuOutput = skuInfo[1];
        var qtyOutput = skuInfo[2];
        setValue(txt_SKU_5, skuOutput);
        var perAddQty = 1;
        if (isNumber(qtyOutput)) {
            perAddQty = parseInt(qtyOutput);
        }
        ;var skuValue = getValue2(txt_SKU_5);
        if (skuValue.length == 0) {
            autoFocus(txt_SKU_5);
            return;
        }
        ;
        if (getValue2(txt_SKU_5) != getValue2(wxt_SKU_4)) {
            startMusic();
            autoFocus("ERROR" + txt_SKU_5);
            return;
        } else {
            if (parseInt(userd_MaxScanQty) < (parseInt(getValue2(wxt_Qty_5)) + perAddQty)) {
                startMusic();
                autoFocus(txt_SKU_5);
                updateMessageBar(getValue(hide_Message_24).replace("&1", ""));
                return;
            }
            ;startMusic2();
            setValue(txt_SKU_5, "");
            setValue(wxt_Qty_5, parseInt(getValue2(wxt_Qty_5)) + perAddQty);
            autoFocus(txt_SKU_5);
            if (parseInt(userd_MaxScanQty) == parseInt(getValue2(wxt_Qty_5))) {
                autoFocus(but_Confirm_5);
            }
        }
    } else if (returnCode == codeValue_NORECORD) {
        startMusic();
        setFocus(txt_SKU_5);
        first_EchoMessage(skuInfo[1], first_Alert, "updateMessageBar");
    } else {
        startMusic();
        setFocus(txt_SKU_5);
        first_EchoMessage(skuInfo[1], first_Alert, "updateMessageBar");
    }
};

function but_Confirm_5_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_5);
    if (nextId == sfc_Code_5) {
        doButConfirm5Action();
    } else {
        autoFocus(nextId);
    }
};

function doButConfirm5Action() {
    updateMessageBar("");
    setValue(wxt_Qty_4, "S:" + getValue2(wxt_Qty_5));
    doButConfirm4Action();
};

function but_Cancel_5_Action(id) {
    but_Cancel_4_Action(id);
};

function showPage6Table() {
    userd_ThNameList_1 = new Array(getValue(hide_Lbl_07), getValue(hide_Lbl_08));
    userd_TdContentList_1 = new Array();
    userd_TdContentList_1 = userd_XLocationShwList_6;
    var tableCode = ShowTable_GetTableCode(userd_TableId_1, userd_ThNameList_1, userd_TdContentList_1, userd_MinLineNumber_1, userd_MaxLineNumber_1, userd_ShowLineNumber_1, userd_ShowDeleteAction_1, userd_ShowInfoByDESC_1);
    setInnerHTML2(div_XLocationList_6, tableCode);
    setValue(txt_XLocation_6, "");
    autoFocus(txt_XLocation_6);
};

function ShowTable_DeleteClick_Action(tableId, index) {
    if (tableId == userd_TableId_1 || tableId == userd_TableId_2) {
        return;
    }
    ;
    if (tableId == userd_TableId_3 || tableId == userd_TableId_4) {
        userd_ScanCartonList_7.splice(index, 1);
        showPageSevenAction();
        return;
    }
};

function ShowTable_SingleClick_Action(tableId, index) {
    if (tableId == userd_TableId_1 || tableId == userd_TableId_2) {
        return;
    }
    ;
    if (tableId == userd_TableId_3 || tableId == userd_TableId_4) {
        return;
    }
};

function ShowTable_DoubleClick_Action(tableId, index) {
    if (tableId == userd_TableId_1 || tableId == userd_TableId_2) {
        return;
    }
    ;
    if (tableId == userd_TableId_3 || tableId == userd_TableId_4) {
        return;
    }
};

function ShowTable_ShowAllInfoList(tableId) {
    if (tableId == userd_TableId_1) {
        userd_ThNameList_2 = userd_ThNameList_1.slice(0);
        userd_TdContentList_2 = userd_TdContentList_1.slice(0);
        userd_ShowLineNumber_2 = userd_ShowLineNumber_1;
        userd_ShowDeleteAction_2 = userd_ShowDeleteAction_1;
        userd_ShowInfoByDESC_2 = userd_ShowInfoByDESC_1;
        var tableCode = ShowTable_GetTableCode(userd_TableId_2, userd_ThNameList_2, userd_TdContentList_2, userd_MinLineNumber_2, userd_MaxLineNumber_2, userd_ShowLineNumber_2, userd_ShowDeleteAction_2, userd_ShowInfoByDESC_2);
        setInnerHTML2(div_XLocationList_6, tableCode);
        return;
    }
    ;
    if (tableId == userd_TableId_2) {
        alert("More Info in the database, out of Rf_Buffer.");
        return;
    }
    ;
    if (tableId == userd_TableId_3) {
        userd_ThNameList_4 = userd_ThNameList_3.slice(0);
        userd_TdContentList_4 = userd_TdContentList_3.slice(0);
        userd_ShowLineNumber_4 = userd_ShowLineNumber_3;
        userd_ShowDeleteAction_4 = userd_ShowDeleteAction_3;
        userd_ShowInfoByDESC_4 = userd_ShowInfoByDESC_3;
        var tableCode = ShowTable_GetTableCode(userd_TableId_4, userd_ThNameList_4, userd_TdContentList_4, userd_MinLineNumber_4, userd_MaxLineNumber_4, userd_ShowLineNumber_4, userd_ShowDeleteAction_4, userd_ShowInfoByDESC_4);
        setInnerHTML2(div_SplitCartonList_7, tableCode);
        return;
    }
    ;
    if (tableId == userd_TableId_4) {
        alert("More Info in the database, out of Rf_Buffer.");
        return;
    }
};

function txt_XLocation_6_Action(id) {
    var unlinkedLocationValue = first_GetLocationValue(txt_XLocation_6);
    if (unlinkedLocationValue.length == 0) {
        autoFocus(txt_XLocation_6);
        return;
    }
    ;var isExist = false;
    for (var i = 0; i < userd_XLocationShwList_6.length; i++) {
        if (unlinkedLocationValue == userd_XLocationShwList_6[i][1].toUpperCase()) {
            isExist = true;
            break;
        }
    }
    ;
    if (!isExist) {
        startMusic();
        autoFocus("ERROR" + txt_XLocation_6);
        return;
    }
    ;autoFocus(but_Unlinked_6);
};

function but_Unlinked_6_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_6);
    if (nextId == sfc_Code_6) {
        doButUnlinked6Action();
    } else {
        autoFocus(nextId);
    }
};

function doButUnlinked6Action() {
    var unlinkedLocationValue = first_GetLocationValue(txt_XLocation_6);
    if (unlinkedLocationValue.length == 0) {
        autoFocus(txt_XLocation_6);
        return;
    }
    ;var isExist = false;
    for (var i = 0; i < userd_XLocationShwList_6.length; i++) {
        if (unlinkedLocationValue == userd_XLocationShwList_6[i][1].toUpperCase()) {
            isExist = true;
            break;
        }
    }
    ;
    if (!isExist) {
        startMusic();
        autoFocus("ERROR" + txt_XLocation_6);
        return;
    } else {
        setValue(hide_XLocationId_6, unlinkedLocationValue);
    }
    ;_prevView = _div6Input;
    showViewSingle(_div1Waiting, inViewsKeys);
    doServerAction(className, "unXLocationAction", QSKeys, unXLocationAction);
};

function unXLocationAction(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            var obj2 = replyData.strData2;
            userd_XLocationShwList_6 = new Array();
            for (var i = 0; i < obj2.length; i++) {
                userd_XLocationShwList_6.push(new Array(getValue2(hide_XLocationId_3), obj2[i].CHILDLOCATION));
            }
            ;showViewSingle(_div6Input, inViewsKeys);
            showPage6Table();
        } else if (codeValue_NORECORD == replyData.codeValue) {
            userd_XLocationShwList_6 = new Array();
            showViewSingle(_div6Input, inViewsKeys);
            showPage6Table();
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function but_Quit_6_Action(id) {
    showViewSingle(_div3Input, inViewsKeys);
    autoFocus(but_Confirm_3);
};

function showPageSevenAction() {
    showViewSingle(_div7Input, inViewsKeys);
    setValue(txt_SerialNo_7, "");
    autoFocus(txt_SerialNo_7);
    showPageSevenTable();
};

function showPageSevenTable() {
    userd_ThNameList_3 = new Array(getValue(hide_Lbl_09));
    userd_TdContentList_3 = new Array();
    for (var i = 0; i < userd_ScanCartonList_7.length; i++) {
        userd_TdContentList_3.push(new Array(userd_ScanCartonList_7[i]));
    }
    ;var tableCode = ShowTable_GetTableCode(userd_TableId_3, userd_ThNameList_3, userd_TdContentList_3, userd_MinLineNumber_3, userd_MaxLineNumber_3, userd_ShowLineNumber_3, userd_ShowDeleteAction_3, userd_ShowInfoByDESC_3);
    setInnerHTML2(div_SplitCartonList_7, tableCode);
};

function txt_SerialNo_7_Action(id) {
    var serialNoValue = getValue2(txt_SerialNo_7);
    if (serialNoValue.length == 0) {
        autoFocus(txt_SerialNo_7);
        return;
    }
    ;
    for (var i = 0; i < userd_ScanCartonList_7.length; i++) {
        if (serialNoValue == userd_ScanCartonList_7[i]) {
            autoFocus("ERROR1" + txt_SerialNo_7);
            return;
        }
    }
    ;var isExist = false;
    for (var i = 0; i < userd_SplitCartonList_7.length; i++) {
        if (serialNoValue == userd_SplitCartonList_7[i].SERIALNO) {
            isExist = true;
            break;
        }
    }
    ;
    if (!isExist) {
        autoFocus("ERROR2" + txt_SerialNo_7);
        return;
    }
    ;userd_ScanCartonList_7.push(serialNoValue);
    showPageSevenAction();
};

function but_SplitCarton_7_Action(id) {
    var nextId = sfc_GetNextId(id, sfc_Code_7);
    if (nextId == sfc_Code_7) {
        doButSplitCarton7Action();
    } else {
        autoFocus(nextId);
    }
};

function doButSplitCarton7Action() {
    if (userd_ScanCartonList_7 != null || userd_ScanCartonList_7.length != 0) {
        setValue(hide_SplitCartonList_7, userd_ScanCartonList_7.join(";"));
        _prevView = _div7Input;
        showViewSingle(_div1Waiting, inViewsKeys);
        doServerAction(className, "doSplitCartonAction", QSKeys, doSplitCartonAction);
    }
};

function doSplitCartonAction(responseText) {
    var replyData = null;
    try {
        replyData = eval('(' + responseText + ')');
    } catch (e) {
        alert(first_ErrorMessage01);
        setInnerHTML("waitingMsg", first_ErrorMessage01 + ":" + e.message);
        return;
    }
    ;var curSEQ = replyData.SEQ;
    if (curSEQ > first_lastSEQUpdate1) {
        first_lastSEQUpdate1 = curSEQ;
        var returnMessage = replyData.mesg;
        if (codeValue_OK == replyData.codeValue) {
            showViewSingle(_div3Input, inViewsKeys);
            autoFocus("OK" + but_SplitCarton_3);
        } else if (codeValue_NORECORD == replyData.codeValue) {
            showViewSingle(_prevView, inViewsKeys);
        } else {
            showViewSingle(_prevView, inViewsKeys);
            first_EchoMessage(returnMessage, first_Alert, "updateMessageBar");
        }
    }
};

function but_Cancel_7_Action(id) {
    showViewSingle(_div3Input, inViewsKeys);
    autoFocus(but_SplitCarton_3);
};


