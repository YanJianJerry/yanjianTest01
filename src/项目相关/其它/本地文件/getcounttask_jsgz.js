var className="GetCountTask";var sfc_Code_1="";var sfc_Code_2="";var sfc_Code_3="";var sfc_Code_4="";var sfc_Code_5="";var sfc_Code_6="";var hide_PageControl_1="hide_PageControl_1";var hide_PageControl_2="hide_PageControl_2";var hide_PageControl_3="hide_PageControl_3";var hide_PageControl_4="hide_PageControl_4";var hide_PageControl_5="hide_PageControl_5";var hide_PageControl_6="hide_PageControl_6";var txt_CustomerId_1="txt_CustomerId_1";var txt_FromTaskId_1="txt_FromTaskId_1";var txt_ToTaskId_1="txt_ToTaskId_1";var txt_ZoneGroup_1="txt_ZoneGroup_1";var txt_Zone_1="txt_Zone_1";var txt_LocGroup1_1="txt_LocGroup1_1";var txt_LocGroup2_1="txt_LocGroup2_1";var txt_LocationIdFm_1="txt_LocationIdFm_1";var txt_LocationIdTo_1="txt_LocationIdTo_1";var but_Confirm_1="but_Confirm_1";var but_Cancel_1="but_Cancel_1";var wxt_TaskId_2="wxt_TaskId_2";var wxt_FMLocation_2="wxt_FMLocation_2";var wxt_FMTraceId_2="wxt_FMTraceId_2";var txt_FMLocation_2="txt_FMLocation_2";var txt_FMTraceId_2="txt_FMTraceId_2";var wxt_Sku_2="wxt_Sku_2";var txt_ScanSku_2="txt_ScanSku_2";var txt_LotCode_2="txt_LotCode_2";var wxt_SkuDescr_2="wxt_SkuDescr_2";var wxt_UDF1_2="wxt_UDF1_2";var wxt_UDF2_2="wxt_UDF2_2";var wxt_UDF3_2="wxt_UDF3_2";var but_LastOne_2="but_LastOne_2";var but_NextOne_2="but_NextOne_2";var but_Confirm_2="but_Confirm_2";var but_Cancel_2="but_Cancel_2";var cmbUOM="cmbUOM";var txt_Sku_3="txt_Sku_3";var txt_Qty_3="txt_Qty_3";var DIV_LOT="DIV_LOT";var wxt_SkuDescr_3="wxt_SkuDescr_3";var wxt_InvQty_3="wxt_InvQty_3";var but_StockOut_3="but_StockOut_3";var but_Confirm_3="but_Confirm_3";var but_Cancel_3="but_Cancel_3";var wxt_Qty_4="wxt_Qty_4";var wxt_Uom_4="wxt_Uom_4";var txt_Qty_4_1="txt_Qty_4_1";var wxt_Uom_4_1="wxt_Uom_4_1";var but_StockOut_4="but_StockOut_4";var but_Confirm_4="but_Confirm_4";var but_Cancel_4="but_Cancel_4";var but_ScanBySingle_4="but_ScanBySingle_4";var txt_FMLocation_5="txt_FMLocation_5";var wxt_FMLocation_5="wxt_FMLocation_5";var chk_Cancel_5="chk_Cancel_5";var wxt_CountStatus_5="wxt_CountStatus_5";var txt_Sku_5="txt_Sku_5";var txt_Qty_5="txt_Qty_5";var div_CountList_5="div_CountList_5";var but_Confirm_5="but_Confirm_5";var but_Cancel_5="but_Cancel_5";var wxt_Sku_6="wxt_Sku_6";var cmb_CustomerId_6="cmb_CustomerId_6";var wxt_SkuDescr_6="wxt_SkuDescr_6";var but_Confirm_6="but_Confirm_6";var but_Cancel_6="but_Cancel_6";var lastSEQUpdate1=0;var lastSEQUpdate3=0;var lastSEQUpdate2=0;var lastSEQUpdate6=0;var hide_Udf1_1="hide_Udf1_1";var hide_Udf2_1="hide_Udf2_1";var hide_Udf3_1="hide_Udf3_1";var hide_PageIndex_1="hide_PageIndex_1";var hide_Cou_Lst_seq="hide_Cou_Lst_seq";var hide_CustomerId_2="hide_CustomerId_2";var hide_TaskId_2="hide_TaskId_2";var hide_TaskId_Sequence="hide_TaskId_Sequence";var hide_Sku_2="hide_Sku_2";var hide_FmtraceId_2="hide_FmtraceId_2";var hide_Qty_2="hide_Qty_2";var hide_Uom_2="hide_Uom_2";var hide_Lotatt01_2="hide_Lotatt01_2";var hide_Lotatt02_2="hide_Lotatt02_2";var hide_Lotatt03_2="hide_Lotatt03_2";var hide_Lotatt04_2="hide_Lotatt04_2";var hide_Lotatt05_2="hide_Lotatt05_2";var hide_Lotatt06_2="hide_Lotatt06_2";var hide_Lotatt07_2="hide_Lotatt07_2";var hide_Lotatt08_2="hide_Lotatt08_2";var hide_Lotatt09_2="hide_Lotatt09_2";var hide_Lotatt10_2="hide_Lotatt10_2";var hide_Lotatt11_2="hide_Lotatt11_2";var hide_Lotatt12_2="hide_Lotatt12_2";var hide_PackId_2="hide_PackId_2";var hide_QtyIndatabase_2="hide_QtyIndatabase_2";var hide_FmLoction_4="hide_FmLoction_4";var hide_Cou_Sku_loc="hide_Cou_Sku_loc";var hide_Sku_5="hide_Sku_5";var hide_FmLoction_5="hide_FmLoction_5";var hide_Cou_Scr_mod="hide_Cou_Scr_mod";var hide_ScanResult_5="hide_ScanResult_5";var hide_AddSkuResult_5="hide_AddSkuResult_5";var hide_DocNo_5="hide_DocNo_5";var hide_CustomerId_5="hide_CustomerId_5";var buf_chk_Cancel="";var QSKeys_getCountTask=new Array(txt_FromTaskId_1,txt_ToTaskId_1,hide_Udf1_1,hide_Udf2_1,hide_Udf3_1,txt_ZoneGroup_1,txt_Zone_1,txt_LocGroup1_1,txt_LocGroup2_1,txt_LocationIdFm_1,txt_LocationIdTo_1,hide_PageIndex_1,hide_Cou_Lst_seq,txt_CustomerId_1,hide_Cou_Scr_mod,hide_FmLoction_5);var QSKeys_getAllInfoAction=new Array(txt_FromTaskId_1,txt_ToTaskId_1,hide_Udf1_1,hide_Udf2_1,hide_Udf3_1,txt_ZoneGroup_1,txt_Zone_1,txt_LocGroup1_1,txt_LocGroup2_1,txt_LocationIdFm_1,txt_LocationIdTo_1,txt_CustomerId_1,hide_Cou_Scr_mod,hide_FmLoction_5);var QSKeys_updateCountTask=new Array(hide_Sku_2,hide_FmtraceId_2,hide_Qty_2,hide_Uom_2,hide_Lotatt01_2,hide_Lotatt02_2,hide_Lotatt03_2,hide_Lotatt04_2,hide_Lotatt05_2,hide_Lotatt06_2,hide_Lotatt07_2,hide_Lotatt08_2,hide_Lotatt09_2,hide_Lotatt10_2,hide_Lotatt11_2,hide_Lotatt12_2,hide_TaskId_2,hide_TaskId_Sequence,hide_QtyIndatabase_2);var QSKeys_updateListCountTask=new Array(hide_ScanResult_5,hide_AddSkuResult_5,hide_FmLoction_5,hide_FmtraceId_2,hide_Lotatt01_2,hide_Lotatt02_2,hide_Lotatt03_2,hide_Lotatt04_2,hide_Lotatt05_2,hide_Lotatt06_2,hide_Lotatt07_2,hide_Lotatt08_2,hide_Lotatt09_2,hide_Lotatt10_2,hide_Lotatt11_2,hide_Lotatt12_2,hide_TaskId_Sequence,hide_QtyIndatabase_2,hide_DocNo_5);var QSKeys_insertCountTask=new Array(hide_Cou_Sku_loc,hide_CustomerId_2,hide_Sku_2,hide_Lotatt01_2,hide_Lotatt02_2,hide_Lotatt03_2,hide_Lotatt04_2,hide_Lotatt05_2,hide_Lotatt06_2,hide_Lotatt07_2,hide_Lotatt08_2,hide_Lotatt09_2,hide_Lotatt10_2,hide_Lotatt11_2,hide_Lotatt12_2,hide_Qty_2,hide_FmLoction_4,hide_TaskId_Sequence,hide_TaskId_2);var QSKeys_checkSku=new Array(hide_Sku_5,hide_CustomerId_5);var QSKeys_getUomArray=new Array(hide_PackId_2);var QSKeys_getCustomerIdAction=new Array(hide_Sku_5);var hide_Message_01="hide_Message_01";var hide_Message_02="hide_Message_02";var hide_Message_03="hide_Message_03";var hide_Message_04="hide_Message_04";var hide_Message_05="hide_Message_05";var hide_Message_06="hide_Message_06";var hide_Message_07="hide_Message_07";var hide_Message_08="hide_Message_08";var hide_Message_09="hide_Message_09";var hide_Message_10="hide_Message_10";var hide_Message_11="hide_Message_11";var hide_Message_12="hide_Message_12";var hide_Message_13="hide_Message_13";var hide_Message_14="hide_Message_14";var hide_Message_15="hide_Message_15";var hide_Message_16="hide_Message_16";var hide_Message_17="hide_Message_17";var hide_Message_18="hide_Message_18";var hide_Message_19="hide_Message_19";var hide_Message_20="hide_Message_20";var hide_Message_21="hide_Message_21";var hide_Message_22="hide_Message_22";var hide_Message_23="hide_Message_23";var hide_Message_24="hide_Message_24";var hide_Message_25="hide_Message_25";var hide_Lbl_01="hide_Lbl_01";var hide_Lbl_02="hide_Lbl_02";var hide_Lbl_03="hide_Lbl_03";var hide_Lbl_04="hide_Lbl_04";var hide_Lbl_05="hide_Lbl_05";var _div1Input="div1Input";var _div2Input="div2Input";var _div3Input="div3Input";var _div4Input="div4Input";var _div5Input="div5Input";var _div6Input="div6Input";var _div1Waiting="div1Waiting";var inViewsKeys=new Array(_div1Input,_div2Input,_div3Input,_div4Input,_div5Input,_div6Input,_div1Waiting,PublicJs_dynamicLot_divLotInput);var _prevView=_div1Input;var BLD_COU="";var COU_SKP_LOT="";var COU_SKU_LOC="";var COU_CMB_UOM="";var COU_PCS_SCN="";var COU_SCR_MOD="";var SKU_BCD_LVL="";var userd_AllInfo=null;var userd_AllInfo_Index=0;var userd_PageInfo=null;var userd_UomCode_Array=new Array();var userd_UomDesc_Array=new Array();var userd_UomQty_Array=new Array();var userd_ScanQty=0;var userd_next_last="";var userd_UomList=new Array();var userd_CustomerId="";var checkScanskuAllInfo=null;var recordIsNewSku_2="N";var userd_CUSTOMERIDInfo=null;var userd_ScanSku=new Array();var userd_ShowSkuList=new Array();var userd_NewSkuList=new Array();var userd_TableId_1="userd_TableId_1";var userd_ThNameList_1=new Array(getValue(hide_Lbl_04),"SKU",getValue(hide_Lbl_01),getValue(hide_Lbl_03));var userd_TdContentList_1=new Array();var userd_MinLineNumber_1=3;var userd_MaxLineNumber_1=10;var userd_ShowLineNumber_1=false;var userd_ShowDeleteAction_1=false;var userd_ShowInfoByDESC_1=false;var userd_TableId_2="userd_TableId_2";var userd_ThNameList_2=new Array(getValue(hide_Lbl_04),"SKU",getValue(hide_Lbl_01),getValue(hide_Lbl_03));var userd_TdContentList_2=new Array();var userd_MinLineNumber_2=3;var userd_MaxLineNumber_2=999;var userd_ShowLineNumber_2=false;var userd_ShowDeleteAction_2=false;var userd_ShowInfoByDESC_2=false;var userd_AllQty=0;var userd_ScanQty=0;var buf_index_5=-1;var buf_indexNew_5=-1;var buf_userd_NewSkuQty=0;var enabled=0;var DataLocaltionIsNull=0;var buf_IsAutoGetTask_1=false;var buf_CustomerId_6="";var userd_CustomerAndSkuInfo=new Array();var buf_Lot01_1="";var buf_Lot02_1="";var buf_Lot03_1="";var buf_Lot04_1="";var buf_Lot05_1="";var buf_Lot06_1="";var buf_Lot07_1="";var buf_Lot08_1="";var buf_Lot09_1="";var buf_Lot10_1="";var buf_Lot11_1="";var buf_Lot12_1="";var buf_SkuLotIsEmpty_1=true;function initHtmlPage(){_prevView=_div1Input;showViewSingle(_div1Input,inViewsKeys);initPageOne();initPageTwo();initPageThree();initPageFour();initPageFive();initPageSix();intiUserDefined();autoFocus("init");}function initPageOne(){sfc_SetValue(txt_CustomerId_1,"",sfc_Code_1);sfc_SetValue(txt_FromTaskId_1,"",sfc_Code_1);sfc_SetValue(txt_ToTaskId_1,"",sfc_Code_1);sfc_SetValue(txt_ZoneGroup_1,"",sfc_Code_1);sfc_SetValue(txt_Zone_1,"",sfc_Code_1);sfc_SetValue(txt_LocGroup1_1,"",sfc_Code_1);sfc_SetValue(txt_LocGroup2_1,"",sfc_Code_1);sfc_SetValue(txt_LocationIdFm_1,"",sfc_Code_1);sfc_SetValue(txt_LocationIdTo_1,"",sfc_Code_1);setValue(hide_PageIndex_1,"1");}function initPageTwo(){sfc_SetValue(wxt_TaskId_2,"",sfc_Code_2);sfc_SetValue(wxt_FMLocation_2,"",sfc_Code_2);sfc_SetValue(wxt_FMTraceId_2,"",sfc_Code_2);sfc_SetValue(txt_FMLocation_2,"",sfc_Code_2);sfc_SetValue(txt_FMTraceId_2,"",sfc_Code_2);sfc_SetValue(wxt_Sku_2,"",sfc_Code_2);sfc_SetValue(txt_ScanSku_2,"",sfc_Code_2);sfc_SetValue(txt_LotCode_2,"",sfc_Code_2);sfc_SetValue(wxt_SkuDescr_2,"",sfc_Code_2);sfc_SetValue(wxt_UDF1_2,"",sfc_Code_2);sfc_SetValue(wxt_UDF2_2,"",sfc_Code_2);sfc_SetValue(wxt_UDF3_2,"",sfc_Code_2);updateInfoPageMessage(0,0);removeAllOptions(cmbUOM);}function initPageThree(){sfc_SetValue(txt_Sku_3,"",sfc_Code_3);sfc_SetValue(txt_Qty_3,"",sfc_Code_3);sfc_SetValue(wxt_SkuDescr_3,"",sfc_Code_3);sfc_SetValue(wxt_InvQty_3,"",sfc_Code_3);}function initPageFour(){setValue(hide_FmLoction_4,"");sfc_SetValue(wxt_Qty_4,"",sfc_Code_4);sfc_SetValue(wxt_Uom_4,"",sfc_Code_4);sfc_SetValue(txt_Qty_4_1,"",sfc_Code_4);sfc_SetValue(wxt_Uom_4_1,"",sfc_Code_4);}function initPageFive(){sfc_SetValue(chk_Cancel_5,"",sfc_Code_5);sfc_SetValue(wxt_FMLocation_5,"",sfc_Code_5);sfc_SetValue(txt_FMLocation_5,"",sfc_Code_5);sfc_SetValue(wxt_CountStatus_5,"",sfc_Code_5);sfc_SetValue(txt_Sku_5,"",sfc_Code_5);sfc_SetValue(txt_Qty_5,"",sfc_Code_5);}function initPageSix(){sfc_SetValue(wxt_Sku_6,"",sfc_Code_6);sfc_SetValue(wxt_SkuDescr_6,"",sfc_Code_6);removeAllOptions(cmb_CustomerId_6);}function intiUserDefined(){if(COU_SKU_LOC!="NO"&&SKU_BCD_LVL=="2"){first_EchoMessage(getValue(hide_Message_21),first_Alert,"");first_But_Cancel_Action();}checkScanskuAllInfo=null;userd_AllInfo=null;userd_UomCode_Array=new Array();userd_UomDesc_Array=new Array();userd_UomQty_Array=new Array();userd_ScanSku=new Array();userd_ShowSkuList=new Array();userd_NewSkuList=new Array();userd_next_last="";recordIsNewSku_2="N";if(getValue(chk_Cancel_5)=="Y"){buf_chk_Cancel="Y";}else{buf_chk_Cancel="N";}userd_AllQty=0;userd_ScanQty=0;userd_CustomerAndSkuInfo=new Array();buf_CustomerId_6="";buf_Lot01_1="";buf_Lot02_1="";buf_Lot03_1="";buf_Lot04_1="";buf_Lot05_1="";buf_Lot06_1="";buf_Lot07_1="";buf_Lot08_1="";buf_Lot09_1="";buf_Lot10_1="";buf_Lot11_1="";buf_Lot12_1="";buf_SkuLotIsEmpty_1=true;}function updateMessageBar1(sNewStr){setInnerHTML("hide_PageControl_1",sNewStr);setInnerHTML("hide_PageControl_2",sNewStr);setInnerHTML("hide_PageControl_3",sNewStr);setInnerHTML("hide_PageControl_4",sNewStr);setInnerHTML("hide_PageControl_5",sNewStr);}function updateInfoPageMessage(index,all){if(index==null||index.length==0||parseFloat(index)<0){index=0;}if(all==null||all.length==0||parseFloat(all)<0){all=0;}var showInfo="("+getValue3(hide_Message_10).replace("&2",index).replace("&1",all)+")";setInnerHTML("lbl_Page_2",showInfo);}function returnPrevPage(){showViewSingle(_prevView,inViewsKeys);}function autoFocus(id){if(id=="init"){autoFocus(sfc_GetNextActionId(id,sfc_Code_1));return;}if(id==txt_CustomerId_1){setFocus(id);first_MessageSystemById(hide_Message_13);return;}if(id==txt_FromTaskId_1){setFocus(id);first_MessageSystemById(hide_Message_01);return;}if(id=="ERROR"+txt_FromTaskId_1){setFocus(txt_FromTaskId_1);first_MessageSystemById(hide_Message_04,false);return;}if(id==txt_ToTaskId_1){setFocus(id);first_MessageSystemById(hide_Message_01);return;}if(id==txt_ZoneGroup_1){setFocus(id);first_MessageSystemById("");return;}if(id==txt_Zone_1){setFocus(id);first_MessageSystemById("");return;}if(id==txt_LocGroup1_1){setFocus(id);first_MessageSystemById("");return;}if(id==txt_LocGroup2_1){setFocus(id);first_MessageSystemById("");return;}if(id==txt_LocationIdFm_1){setFocus(id);first_MessageSystemById("");return;}if(id==txt_LocationIdTo_1){setFocus(id);first_MessageSystemById("");return;}if(id==but_Confirm_1){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Cancel_1){setFocus2(id);first_MessageSystemById("");return;}if(id==sfc_Code_1){doButConfirm1Action(id);return;}if(id=="ERROR"+txt_FMTraceId_2){setFocus(txt_FMTraceId_2);first_MessageSystemById(hide_Message_18,false);return;}if(id==txt_FMLocation_2){setFocus(id);first_MessageSystemById("");return;}if(id=="ERROR"+txt_FMLocation_2){setFocus(txt_FMLocation_2);first_MessageSystemById(hide_Message_17,false);return;}if(id==txt_FMTraceId_2){setFocus(id);first_MessageSystemById("");return;}if(id==txt_ScanSku_2){setFocus(id);first_MessageSystemById("");return;}if(id=="ERROR"+txt_ScanSku_2){setFocus(txt_ScanSku_2);first_MessageSystemById(hide_Message_06,false);return;}if(id==txt_LotCode_2){setFocus(id);first_MessageSystemById("");return;}if(id==but_LastOne_2){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Confirm_2){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Cancel_2){setFocus2(id);first_MessageSystemById("");return;}if(id==but_NextOne_2){setFocus2(id);first_MessageSystemById("");return;}if(id==sfc_Code_2){doButConfirm2Action(id);return;}if(id==txt_Sku_3){setFocus(id);first_MessageSystemById(hide_Message_05);return;}if(id=="ERROR"+txt_Sku_3){setFocus(txt_Sku_3);first_MessageSystemById(hide_Message_05,false);return;}if(id==txt_Qty_3){setFocus(id);first_MessageSystemById(hide_Message_07);return;}if(id=="ERROR"+txt_Qty_3){setFocus(txt_Qty_3);first_MessageSystemById(hide_Message_07,false);return;}if(id==but_StockOut_3){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Confirm_3){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Cancel_3){setFocus2(id);first_MessageSystemById("");return;}if(id==sfc_Code_3){doButConfirm3Action(id);return;}if(id==txt_Qty_4_1){setFocus(id);first_MessageSystemById("");return;}if(id=="ERROR"+txt_Qty_4_1){setFocus(txt_Qty_4_1);first_MessageSystemById(hide_Message_07,false);return;}if(id==but_StockOut_4){setFocus2(id);first_MessageSystemById("");return;}if(id==but_ScanBySingle_4){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Confirm_4){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Cancel_4){setFocus2(id);first_MessageSystemById("");return;}if(id==sfc_Code_4){doButConfirm4Action(id);return;}if(id==txt_FMLocation_5){setFocus(id);first_MessageSystemById("");return;}if(id=="ERROR"+txt_FMLocation_5){setFocus(txt_FMLocation_5);first_MessageSystemById(hide_Message_14,false);return;}if(id=="ERROR1"+txt_FMLocation_5){setFocus(txt_FMLocation_5);first_MessageSystemById(hide_Message_15,false);return;}if(id=="ERROR2"+txt_FMLocation_5){setFocus(txt_FMLocation_5);first_MessageSystemById(hide_Message_17,false);return;}if(id==chk_Cancel_5){setFocus(id);first_MessageSystemById("");return;}if(id==txt_Sku_5){setFocus(id);first_MessageSystemById(hide_Message_05);return;}if(id=="ERROR"+txt_Sku_5){setFocus(txt_Sku_5);first_MessageSystemById(hide_Message_05,false);return;}if(id=="ERROR1"+txt_Sku_5){setFocus(txt_Sku_5);first_MessageSystemById(hide_Message_16,false);return;}if(id==txt_Qty_5){setFocus(id);first_MessageSystemById("");return;}if(id=="ERROR"+txt_Qty_5){setFocus(txt_Qty_5);first_MessageSystemById(hide_Message_07,false);return;}if(id==but_Confirm_5){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Cancel_5){setFocus2(id);first_MessageSystemById("");return;}if(id==sfc_Code_5){doButConfirm5Action(id);return;}if(id==cmb_CustomerId_6){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Confirm_6){setFocus2(id);first_MessageSystemById("");return;}if(id==but_Cancel_6){setFocus2(id);first_MessageSystemById("");return;}if(id==sfc_Code_6){doButConfirm6Action(id);return;}if(id=="PublicJs_dynamicLot_ButtonConfirmLot"){PublicJs_dynamicLot_ConfirmLotButton();return;}if(id=="PublicJs_dynamicLot_ButtonCancelLot"){PublicJs_dynamicLot_CancelLotButton();return;}var AndroidHideId=id.indexOf("check_")==0?id.substring(6,id.length):id;AndroidHideId="PublicJs_dynamicLot_androidId"+AndroidHideId;var AndroidHideIdValue=getValue(AndroidHideId);var needAnalyzer=AndroidHideIdValue.substring(0,1);var actionType1=AndroidHideIdValue.substring(1,2);var actionType2="0";if(AndroidHideIdValue.length==3){actionType2=AndroidHideIdValue.substring(2,3);}if(id.indexOf("check_")!=0){if(actionType1=="1"){PublicJs_dynamicLot_FinallyLot_OnKeyDown(null,id,needAnalyzer);return;}if(actionType1=="2"){PublicJs_dynamicLot_OnkeyDown(null,id,needAnalyzer);return;}if(actionType1=="5"){PublicJs_dynamicLot_EnterToCalculateLot2_FinallyLot(null,id,needAnalyzer);return;}if(actionType1=="6"){PublicJs_dynamicLot_EnterToCalculateLot2(null,id,needAnalyzer);return;}if(actionType1=="7"){PublicJs_dynamicLot_checkTime8_FinallyLot(null,id,needAnalyzer);return;}if(actionType1=="8"){PublicJs_dynamicLot_checkTime8(null,id,needAnalyzer);return;}if(actionType1=="B"){PublicJs_dynamicLot_checkTime12_FinallyLot(null,id,needAnalyzer);return;}if(actionType1=="C"){PublicJs_dynamicLot_checkTime12(null,id,needAnalyzer);return;}}else{if(actionType2=="3"){PublicJs_dynamicLot_Check_FinallyLot_OnKeyDown(null,id,needAnalyzer);return;}if(actionType2=="4"){PublicJs_dynamicLot_Check_OnkeyDown(null,id,needAnalyzer);return;}if(actionType2=="9"){PublicJs_dynamicLot_Check_checkTime8_FinallyLot(null,id,needAnalyzer);return;}if(actionType2=="A"){PublicJs_dynamicLot_Check_checkTime8(null,id,needAnalyzer);return;}if(actionType2=="D"){PublicJs_dynamicLot_Check_checkTime12_FinallyLot(null,id,needAnalyzer);return;}if(actionType2=="E"){PublicJs_dynamicLot_Check_checkTime12(null,id,needAnalyzer);return;}}if(id==SkuBarcodeAnalyzer_But_Confrim_1){SkuBarcodeAnalyzer_But_Confrim_1_Action();return;}if(id==SkuBarcodeAnalyzer_But_GetLastOne){SkuBarcodeAnalyzer_But_GetLastOne_Action();return;}if(id==SkuBarcodeAnalyzer_But_Confrim_2){SkuBarcodeAnalyzer_But_Confrim_2_Action();return;}if(id==SkuBarcodeAnalyzer_But_Cancel_2){SkuBarcodeAnalyzer_But_Cancel_2_Action();return;}if(id==SkuBarcodeAnalyzer_But_GetNext){SkuBarcodeAnalyzer_But_GetNext_Action();return;}if(id==SkuBarcodeAnalyzer_Txt_Accessory_3){SkuBarcodeAnalyzer_Txt_Accessory_3_Action();return;}if(id==SkuBarcodeAnalyzer_But_Confrim_3){SkuBarcodeAnalyzer_But_Confrim_3_Action();return;}if(id==SkuBarcodeAnalyzer_But_Cancel_3){SkuBarcodeAnalyzer_But_Cancel_3_Action();return;}alert("function autoFocus() is Error: "+id+" not found.");}function first_ActionControl(id,event){if(event==null||event.keyCode==13){if(false){initHtmlPage();return;}if(id==txt_CustomerId_1){doTxtCustomerId1Acion(id);return;}if(id==txt_FromTaskId_1){doTxtFromtaskId1Action(id);return;}if(id==txt_ToTaskId_1){doTxtTotaskId1Action(id);return;}if(id==txt_ZoneGroup_1){doTxtZoneGroup1Action(id);return;}if(id==txt_Zone_1){doTxtZone1Action(id);return;}if(id==txt_LocGroup1_1){doTxtLocgroup1Action(id);return;}if(id==txt_LocGroup2_1){doTxtLocgroup2Action(id);return;}if(id==txt_LocationIdFm_1){doTxtLocationIdFm1Action(id);return;}if(id==txt_LocationIdTo_1){doTxtLocationIdTo1Action(id);return;}if(id==but_Confirm_1){doButConfirm1Action(id);return;}if(id==but_Cancel_1){doButCancel1Action(id);return;}if(id==txt_FMLocation_2){doTxtFmLocation2Action(id);return;}if(id==txt_FMTraceId_2){doTxtFmtraceid2Action(id);return;}if(id==txt_ScanSku_2){doTxtScansku2Action(id);return;}if(id==txt_LotCode_2){doTxtLotcode2Action(id);return;}if(id==but_LastOne_2){doButLastone2Action(id);return;}if(id==but_Confirm_2){doButConfirm2Action(id);return;}if(id==but_Cancel_2){doButCancel2Action(id);return;}if(id==but_NextOne_2){doButNextone2Action(id);return;}if(id==txt_Sku_3){doTxtSku3Action(id);return;}if(id==txt_Qty_3){doTxtQty3Action(id);return;}if(id==but_StockOut_3){doButStockout3Action(id);return;}if(id==but_Confirm_3){doButConfirm3Action(id);return;}if(id==but_Cancel_3){doButCancel3Action(id);return;}if(id==txt_Qty_4_1){doTxtQty4Action(id);return;}if(id==but_StockOut_4){doButStockout4Action(id);return;}if(id==but_ScanBySingle_4){doButScanbysingle4Action(id);return;}if(id==but_Confirm_4){doButConfirm4Action(id);return;}if(id==but_Cancel_4){doButCancel4Action(id);return;}if(id==txt_FMLocation_5){doTxtFindLocation5Action(id);return;}if(id==chk_Cancel_5){doChkCancel5Action(id);return;}if(id==txt_Sku_5){doTxtSku5Action(id);return;}if(id==txt_Qty_5){doTxtQty5Action(id);return;}if(id==but_Confirm_5){doButConfirm5Action(id);return;}if(id==but_Cancel_5){doButCancel5Action(id);return;}if(id==cmb_CustomerId_6){doCmbCustomerId6Action(id);return;}if(id==but_Confirm_6){doButConfirm6Action(id);return;}if(id==but_Cancel_6){doButCancel6Action(id);return;}if(id=="PublicJs_dynamicLot_ButtonConfirmLot"){PublicJs_dynamicLot_ConfirmLotButton();return;}if(id=="PublicJs_dynamicLot_ButtonCancelLot"){PublicJs_dynamicLot_CancelLotButton();return;}if(id==SkuBarcodeAnalyzer_But_Confrim_1){SkuBarcodeAnalyzer_But_Confrim_1_Action();return;}if(id==SkuBarcodeAnalyzer_But_GetLastOne){SkuBarcodeAnalyzer_But_GetLastOne_Action();return;}if(id==SkuBarcodeAnalyzer_But_Confrim_2){SkuBarcodeAnalyzer_But_Confrim_2_Action();return;}if(id==SkuBarcodeAnalyzer_But_Cancel_2){SkuBarcodeAnalyzer_But_Cancel_2_Action();return;}if(id==SkuBarcodeAnalyzer_But_GetNext){SkuBarcodeAnalyzer_But_GetNext_Action();return;}if(id==SkuBarcodeAnalyzer_Txt_Accessory_3){SkuBarcodeAnalyzer_Txt_Accessory_3_Action();return;}if(id==SkuBarcodeAnalyzer_But_Confrim_3){SkuBarcodeAnalyzer_But_Confrim_3_Action();return;}if(id==SkuBarcodeAnalyzer_But_Cancel_3){SkuBarcodeAnalyzer_But_Cancel_3_Action();return;}alert("function first_ActionControl() is Error: "+id+" not found.");}}function first_DoPageConfirmAction(event){if(first_CurrentShowingPage==_div1Input){doButConfirm1Action(id);return;}if(first_CurrentShowingPage==_div2Input){doButConfirm2Action(id);return;}if(first_CurrentShowingPage==_div3Input){doButConfirm3Action(id);return;}if(first_CurrentShowingPage==_div4Input){doButConfirm4Action(id);return;}if(first_CurrentShowingPage==_div5Input){doButConfirm5Action(id);return;}}function first_DoPageCancelAction(event){if(first_CurrentShowingPage==_div1Input){doButCancel1Action(id);return;}if(first_CurrentShowingPage==_div2Input){doButCancel2Action(id);return;}if(first_CurrentShowingPage==_div3Input){doButCancel3Action(id);return;}if(first_CurrentShowingPage==_div4Input){doButCancel4Action(id);return;}if(first_CurrentShowingPage==_div5Input){doButCancel5Action(id);return;}}function first_DoPageGetLastAction(event){if(first_CurrentShowingPage==_div2Input){doButLastone2Action(id);return;}}function first_DoPageGetNextAction(event){if(first_CurrentShowingPage==_div2Input){doButNextone2Action(id);return;}}function doTxtCustomerId1Acion(id){startMusic2();autoFocus(sfc_GetNextId(txt_CustomerId_1,sfc_Code_1));}function doTxtFromtaskId1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_FromTaskId_1,sfc_Code_1));}function doTxtTotaskId1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_ToTaskId_1,sfc_Code_1));}function doTxtZoneGroup1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_ZoneGroup_1,sfc_Code_1));}function doTxtZone1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_Zone_1,sfc_Code_1));}function doTxtLocgroup1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_LocGroup1_1,sfc_Code_1));}function doTxtLocgroup2Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_LocGroup2_1,sfc_Code_1));}function doTxtLocationIdFm1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_LocationIdFm_1,sfc_Code_1));}function doTxtLocationIdTo1Action(id){startMusic2();autoFocus(sfc_GetNextId(txt_LocationIdTo_1,sfc_Code_1));}function doButConfirm1Action(id){if(buf_IsAutoGetTask_1==false){var nextId=sfc_GetNextId(id,sfc_Code_1);if(nextId!=sfc_Code_1){autoFocus(nextId);return;}}setValue(hide_Cou_Scr_mod,COU_SCR_MOD);setValue(hide_FmLoction_5,"");setValue(hide_Cou_Sku_loc,COU_SKU_LOC);first_MessageSystemById("");_prevView=_div1Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getCountTask",QSKeys_getCountTask,getCountTask);}function getCountTask(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate1){lastSEQUpdate1=curSEQ;if(codeValue_OK==replyData.codeValue){userd_PageInfo=replyData.strData1;userd_AllInfo=replyData.strData2;userd_CUSTOMERIDInfo=replyData.strData2;var customerId=getValue2(txt_CustomerId_1);var customerIdValue=userd_AllInfo[0].CUSTOMERID;var customerIdIndex=-1;for(var i=1;i<userd_AllInfo.length;i++){if(customerIdValue!=userd_AllInfo[i].CUSTOMERID){customerIdIndex=i;break;}}if(customerId.length>0){userd_CustomerId=customerId;}else{if(customerIdIndex==-1){userd_CustomerId=userd_AllInfo[0].CUSTOMERID;}else{userd_CustomerId="*";}}if(COU_SCR_MOD!="SIMPLE"){if(userd_next_last==null||userd_next_last.length==0){userd_next_last="next";}if(userd_next_last=="next"){userd_AllInfo_Index=0;}else{if(userd_next_last=="last"){userd_AllInfo_Index=userd_PageInfo.PAGESIZE-1;}else{userd_AllInfo_Index=parseFloat(userd_next_last);userd_next_last="";}}showPageTwo();}else{showPageFive(false);}if(buf_IsAutoGetTask_1){first_MessageSystemById(hide_Message_08,true);buf_IsAutoGetTask_1=false;}}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_div1Input,inViewsKeys);if(buf_IsAutoGetTask_1){autoFocus(txt_FromTaskId_1);first_MessageSystemById(hide_Message_08,true);buf_IsAutoGetTask_1=false;}else{autoFocus("ERROR"+txt_FromTaskId_1);}}else{showViewSingle(_div1Input,inViewsKeys);autoFocus(txt_FromTaskId_1);var returnMessage=replyData.mesg;if(returnMessage.indexOf("1.-->")==0){first_MessageSystem(getValue(hide_Message_03).replace("&1"," TSK_TASKLISTS "),false);}else{if(returnMessage.indexOf("2.-->")==0){first_MessageSystem(getValue(hide_Message_03).replace("&1"," VIEW_UOM "),false);}}}}}}function showPageTwo(){var all=userd_PageInfo.ALL;var now=(userd_AllInfo_Index+1)+(parseFloat(userd_PageInfo.PAGENOW)-1)*parseFloat(userd_PageInfo.PAGESIZE);updateInfoPageMessage(now,all);var obj=userd_AllInfo[userd_AllInfo_Index];sfc_SetValue(wxt_TaskId_2,obj.TASKID.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_FMLocation_2,obj.FMLOCATION.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_FMTraceId_2,obj.FMTRACEID.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_Sku_2,obj.SKU.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_SkuDescr_2,obj.SKU_NAME.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_UDF1_2,obj.UDF1.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_UDF2_2,obj.UDF2.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_UDF3_2,obj.UDF3.toUpperCase(),sfc_Code_2);sfc_SetValue(wxt_SkuDescr_3,obj.SKU_NAME.toUpperCase(),sfc_Code_3);if(BLD_COU!="Y"){sfc_SetValue(wxt_InvQty_3,obj.QTY.toUpperCase(),sfc_Code_3);}if("Y"==obj.DYNAMICINVENTORY.toUpperCase()){setValue(hide_QtyIndatabase_2,obj.QTY.toUpperCase());}else{setValue(hide_QtyIndatabase_2,"");}if(BLD_COU=="Y"){sfc_SetValue(wxt_Qty_4,"???",sfc_Code_4);}else{sfc_SetValue(wxt_Qty_4,obj.QTY,sfc_Code_4);}sfc_SetValue(wxt_Uom_4,obj.UOM.toUpperCase(),sfc_Code_4);sfc_SetValue(wxt_Uom_4_1,obj.UOM.toUpperCase(),sfc_Code_4);sfc_SetValue(txt_Qty_4_1,obj.QTY,sfc_Code_4);setValue(hide_Qty_2,getValue(txt_Qty_4_1));setValue(hide_CustomerId_2,obj.CUSTOMERID.toUpperCase());setValue(hide_Sku_2,obj.SKU.toUpperCase());setValue(hide_TaskId_2,obj.TASKID.toUpperCase());setValue(hide_TaskId_Sequence,obj.TASKID_SEQUENCE.toUpperCase());setValue(hide_FmtraceId_2,obj.FMTRACEID.toUpperCase());setValue(hide_Qty_2,obj.QTY.toUpperCase());setValue(hide_Lotatt01_2,obj.LOTATT01.toUpperCase());setValue(hide_Lotatt02_2,obj.LOTATT02.toUpperCase());setValue(hide_Lotatt03_2,obj.LOTATT03.toUpperCase());setValue(hide_Lotatt04_2,obj.LOTATT04.toUpperCase());setValue(hide_Lotatt05_2,obj.LOTATT05.toUpperCase());setValue(hide_Lotatt06_2,obj.LOTATT06.toUpperCase());setValue(hide_Lotatt07_2,obj.LOTATT07.toUpperCase());setValue(hide_Lotatt08_2,obj.LOTATT08.toUpperCase());setValue(hide_Lotatt09_2,obj.LOTATT09.toUpperCase());setValue(hide_Lotatt10_2,obj.LOTATT10.toUpperCase());setValue(hide_Lotatt11_2,obj.LOTATT11.toUpperCase());setValue(hide_Lotatt12_2,obj.LOTATT12.toUpperCase());setValue(hide_PackId_2,obj.PACKID.toUpperCase());if(parseInt(now)==1){setDisabled(but_LastOne_2,true);}else{setDisabled(but_LastOne_2,false);}if(parseInt(now)==parseInt(all)){setDisabled(but_NextOne_2,true);}else{setDisabled(but_NextOne_2,false);}showViewSingle(_div2Input,inViewsKeys);autoFocus(sfc_GetNextActionId("init",sfc_Code_2));if(COU_SCR_MOD=="NORMAL"){sfc_SetValue(txt_FMLocation_2,getValue2(wxt_FMLocation_2),sfc_Code_2);sfc_SetValue(txt_FMTraceId_2,getValue2(wxt_FMTraceId_2),sfc_Code_2);sfc_SetValue(txt_ScanSku_2,getValue2(wxt_Sku_2),sfc_Code_2);}}function getUomArray(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate3){lastSEQUpdate3=curSEQ;if(codeValue_OK==replyData.codeValue){var obj2=replyData.strData2;userd_UomCode_Array=new Array();userd_UomDesc_Array=new Array();userd_UomQty_Array=new Array();for(var i=0;i<obj2.length;i++){userd_UomCode_Array[i]=obj2[i].UOM;userd_UomDesc_Array[i]=obj2[i].DESCR;userd_UomQty_Array[i]=obj2[i].QTY;}startMusic2();showViewSingle(_div4Input,inViewsKeys);if(COU_PCS_SCN=="Y"){doButScanbysingle4Action();return;}autoFocus(sfc_GetNextId("init",sfc_Code_4));}else{if(codeValue_NORECORD==replyData.codeValue){}else{}}}}function setUomValue(){setValue(cmbUOM,userd_AllInfo[userd_AllInfo_Index].UOM.toUpperCase());}function doButCancel1Action(id){first_But_Cancel_Action();}function cmbUOM_Action(){setValue(hide_Uom_2,getValue(cmbUOM));}function doButConfirm2Action(id){var nextId=sfc_GetNextId(id,sfc_Code_2);if(nextId!=sfc_Code_2){autoFocus(nextId);return;}if(COU_SCR_MOD=="NORMAL"){var FMLocation=first_GetLocationValue(txt_FMLocation_2);if(FMLocation!=""&&FMLocation!=getValue2(wxt_FMLocation_2)){autoFocus("ERROR"+txt_FMLocation_2);return;}if(!(getValue2(txt_FMTraceId_2)=="")&&getValue2(txt_FMTraceId_2)!=getValue2(wxt_FMTraceId_2)){autoFocus("ERROR"+txt_FMTraceId_2);return;}}setValue(hide_Sku_2,getValue(txt_ScanSku_2));var obj=userd_AllInfo[userd_AllInfo_Index];if(COU_SKU_LOC!="NO"||isY(COU_SKP_LOT)||obj.FMLOTNUM=="*"){_prevView=_div2Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getUomArray",QSKeys_getUomArray,getUomArray);}else{_prevView=_div1Input;PublicJs_dynamicLot_init();PublicJs_dynamicLot_SetLotValue1(obj.LOTATT01);PublicJs_dynamicLot_SetLotValue2(obj.LOTATT02);PublicJs_dynamicLot_SetLotValue3(obj.LOTATT03);PublicJs_dynamicLot_SetLotValue4(obj.LOTATT04);PublicJs_dynamicLot_SetLotValue5(obj.LOTATT05);PublicJs_dynamicLot_SetLotValue6(obj.LOTATT06);PublicJs_dynamicLot_SetLotValue7(obj.LOTATT07);PublicJs_dynamicLot_SetLotValue8(obj.LOTATT08);PublicJs_dynamicLot_SetLotValue9(obj.LOTATT09);PublicJs_dynamicLot_SetLotValue10(obj.LOTATT10);PublicJs_dynamicLot_SetLotValue11(obj.LOTATT11);PublicJs_dynamicLot_SetLotValue12(obj.LOTATT12);PublicJs_dynamicLot_SetSku(getValue2(hide_Sku_2));PublicJs_dynamicLot_SetCustomerID(getValue2(hide_CustomerId_2));PublicJs_dynamicLot_getLotTableSingleShow();}first_MessageSystemById("");}function doButCancel2Action(id){showViewSingle(_div1Input,inViewsKeys);var nextId=sfc_GetNextId("init",sfc_Code_1);if(nextId!=sfc_Code_1){autoFocus(nextId);return;}}function doButLastone2Action(id){userd_AllInfo_Index--;userd_next_last="last";if(userd_AllInfo_Index<0){setValue(hide_PageIndex_1,parseFloat(userd_PageInfo.PAGENOW)-1+"");_prevView=_div1Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getCountTask",QSKeys_getCountTask,getCountTask);}else{showPageTwo();}}function doButNextone2Action(id){userd_AllInfo_Index++;userd_next_last="next";if(userd_AllInfo_Index+1>parseFloat(userd_PageInfo.PAGESIZE)){setValue(hide_PageIndex_1,parseFloat(userd_PageInfo.PAGENOW)+1+"");_prevView=_div1Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getCountTask",QSKeys_getCountTask,getCountTask);}else{showPageTwo();}}function doTxtFmLocation2Action(id){var FMLocation=first_GetLocationValue(txt_FMLocation_2);if(FMLocation!=getValue2(wxt_FMLocation_2)){if(FMLocation!=""){autoFocus("ERROR"+txt_FMLocation_2);return;}}autoFocus(sfc_GetNextId(txt_FMLocation_2,sfc_Code_2));}function doTxtFmtraceid2Action(id){if(getValue2(txt_FMTraceId_2)!=getValue2(wxt_FMTraceId_2)){if(!(getValue2(txt_FMTraceId_2)=="")){autoFocus("ERROR"+txt_FMTraceId_2);return;}}autoFocus(sfc_GetNextId(txt_FMTraceId_2,sfc_Code_2));}function doTxtScansku2Action(id){buf_Lot01_1="";buf_Lot02_1="";buf_Lot03_1="";buf_Lot04_1="";buf_Lot05_1="";buf_Lot06_1="";buf_Lot07_1="";buf_Lot08_1="";buf_Lot09_1="";buf_Lot10_1="";buf_Lot11_1="";buf_Lot12_1="";buf_SkuLotIsEmpty_1=true;var txtSKU=getValue2(txt_ScanSku_2);var paramInfo=new Array("OTH","","",userd_CustomerId,"",txtSKU);SkuBarcodeAnalyzer_SetParameterAttribute(userd_CustomerId,"*","*");SkuBarcodeAnalyzer_AnalyzerSkuBarCode(inViewsKeys,paramInfo,goonDoTxtScanSkuAction);}function goonDoTxtScanSkuAction(){var skuInfo=SkuBarcodeAnalyzer_getSkuInfoResult();var returnCode=skuInfo[0];showViewSingle(_div2Input,inViewsKeys);if(returnCode==codeValue_OK){var skuOutput=skuInfo[1];var qtyOutput=skuInfo[2];buf_Lot01_1=skuInfo[4];buf_Lot02_1=skuInfo[5];buf_Lot03_1=skuInfo[6];buf_Lot04_1=skuInfo[7];buf_Lot05_1=skuInfo[8];buf_Lot06_1=skuInfo[9];buf_Lot07_1=skuInfo[10];buf_Lot08_1=skuInfo[11];buf_Lot09_1=skuInfo[12];buf_Lot10_1=skuInfo[13];buf_Lot11_1=skuInfo[14];buf_Lot12_1=skuInfo[15];setValue(txt_ScanSku_2,skuOutput);if(isNumber(qtyOutput)){sfc_SetValue(txt_Qty_4_1,qtyOutput,sfc_Code_4);}else{var qty=getValue(wxt_Qty_4);sfc_SetValue(txt_Qty_4_1,qty,sfc_Code_4);}if(buf_Lot01_1.length>0||buf_Lot02_1.length>0||buf_Lot03_1.length>0||buf_Lot04_1.length>0||buf_Lot05_1.length>0||buf_Lot06_1.length>0||buf_Lot07_1.length>0||buf_Lot08_1.length>0||buf_Lot09_1.length>0||buf_Lot10_1.length>0||buf_Lot11_1.length>0||buf_Lot12_1.length>0){buf_SkuLotIsEmpty_1=false;}else{buf_SkuLotIsEmpty_1=true;}if(SKU_BCD_LVL=="2"&&buf_SkuLotIsEmpty_1==true){autoFocus(sfc_GetNextId(txt_ScanSku_2,sfc_Code_2));}else{doScanSkuAction();}}else{if(returnCode==codeValue_NORECORD){autoFocus(txt_ScanSku_2);first_EchoMessage(skuInfo[1],first_Alert,"first_MessageSystemById");}else{autoFocus(txt_ScanSku_2);first_EchoMessage(skuInfo[1],first_Alert,"first_MessageSystemById");}}}function doScanSkuAction(){if(getValue2(txt_ScanSku_2)!=getValue2(wxt_Sku_2)){if(!(getValue2(txt_ScanSku_2)=="")){_prevView=_div2Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getAllInfoAction",QSKeys_getAllInfoAction,getAllInfoAction);return;}}autoFocus(sfc_GetNextId(txt_ScanSku_2,sfc_Code_2));}function getAllInfoAction(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate1){lastSEQUpdate1=curSEQ;if(codeValue_OK==replyData.codeValue){checkScanskuAllInfo=replyData.strData2;showViewSingle(_prevView,inViewsKeys);var scanIndex=-1;var skuValue=getValue2(txt_ScanSku_2);for(var i=0;i<checkScanskuAllInfo.length;i++){if(skuValue==checkScanskuAllInfo[i].SKU){scanIndex=i;break;}}if(scanIndex==-1){if(first_EchoMessage(getValue(hide_Message_19),first_Confirm,"first_MessageSystemById")){recordIsNewSku_2="Y";sfc_SetValue(wxt_Sku_2,skuValue,sfc_Code_2);sfc_SetValue(wxt_Qty_4,0,sfc_Code_4);sfc_SetValue(txt_Qty_4_1,0,sfc_Code_4);doButConfirm2Action();}else{autoFocus(txt_ScanSku_2);}}else{autoFocus("ERROR"+txt_ScanSku_2);}}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_prevView,inViewsKeys);startMusic();autoFocus(txt_ScanSku_2);}else{showViewSingle(_prevView,inViewsKeys);first_EchoMessage(returnMessage,first_Alert,"updateMessageBar");autoFocus(txt_ScanSku_2);}}}}function doTxtLotcode2Action(id){var lotCodeValue=getValue2(txt_LotCode_2);if(lotCodeValue.length==0){autoFocus(sfc_GetNextId(txt_LotCode_2,sfc_Code_2));return;}var lotList=skuBarcodeAnalyzerByJs_LotCode("OTH",lotCodeValue,userd_CustomerId,getValue2(txt_ScanSku_2));buf_Lot01_1=lotList[1];buf_Lot02_1=lotList[2];buf_Lot03_1=lotList[3];buf_Lot04_1=lotList[4];buf_Lot05_1=lotList[5];buf_Lot06_1=lotList[6];buf_Lot07_1=lotList[7];buf_Lot08_1=lotList[8];buf_Lot09_1=lotList[9];buf_Lot10_1=lotList[10];buf_Lot11_1=lotList[11];buf_Lot12_1=lotList[12];autoFocus(sfc_GetNextId(txt_LotCode_2,sfc_Code_2));}function doTxtSku3Action(id){var skuValue=getValue(txt_Sku_3);if(skuValue.length==0){autoFocus(txt_Sku_3);return;}if(skuValue!=getValue(hide_Sku_2)){startMusic();autoFocus(txt_Sku_3);first_MessageSystemById(hide_Message_06,false);return;}var paramInfo=new Array("OTH","","",userd_CustomerId,"",skuValue);SkuBarcodeAnalyzer_SetParameterAttribute(userd_CustomerId,"*","*");SkuBarcodeAnalyzer_AnalyzerSkuBarCode(inViewsKeys,paramInfo,goonDoTxtSkuAction);}function goonDoTxtSkuAction(){var skuInfo=SkuBarcodeAnalyzer_getSkuInfoResult();var returnCode=skuInfo[0];showViewSingle(_div3Input,inViewsKeys);if(returnCode==codeValue_OK){var skuOutput=skuInfo[1];setValue(txt_Sku_3,skuOutput);doSku3Action();}else{if(returnCode==codeValue_NORECORD){autoFocus(txt_Sku_3);first_EchoMessage(skuInfo[1],first_Alert,"first_MessageSystemById");}else{autoFocus(txt_Sku_3);first_EchoMessage(skuInfo[1],first_Alert,"first_MessageSystemById");}}}function doSku3Action(){var skuValue=getValue2(txt_Sku_3);setValue(txt_Sku_3,skuValue);if(skuValue.length==0){autoFocus(sfc_GetNextId(txt_Sku_3,sfc_Code_3));return;}userd_ScanQty++;sfc_SetValue(txt_Qty_3,userd_ScanQty,sfc_Code_3);autoFocus(txt_Sku_3);}function doTxtQty3Action(id){var qtyValue=getValue2(txt_Qty_3);if(!first_CheckNumber(qtyValue,"",getValue2(txt_Sku_3))){autoFocus("ERROR"+txt_Qty_3);return;}userd_ScanQty=parseFloat(qtyValue);autoFocus(txt_Sku_3);}function doButConfirm3Action(id){var nextId=sfc_GetNextId(id,sfc_Code_3);if(nextId!=sfc_Code_3){autoFocus(nextId);return;}if(userd_ScanQty>0){showViewSingle(_div4Input,inViewsKeys);sfc_SetValue(txt_Qty_4_1,userd_ScanQty,sfc_Code_4);var nextId1=sfc_GetNextId("init",sfc_Code_4);if(nextId1!=sfc_Code_4){autoFocus(nextId1);return;}}else{autoFocus(txt_Sku_3);}}function doButCancel3Action(id){showViewSingle(_div4Input,inViewsKeys);autoFocus(but_ScanBySingle_4);}function doButStockout3Action(id){if(first_EchoMessage(getValue(hide_Message_12),first_Confirm,"")){setValue(hide_Qty_2,"0");_prevView=_div4Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"updateCountTask",QSKeys_updateCountTask,updateCountTask);}}function updateCountTask(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate2){lastSEQUpdate2=curSEQ;if(codeValue_OK==replyData.codeValue){var customerIdValue=getValue2(txt_CustomerId_1);var fromTaskIdValue=getValue2(txt_FromTaskId_1);var toTaskIdValue=getValue2(txt_ToTaskId_1);var zoneGroupValue=getValue2(txt_ZoneGroup_1);var zoneValue=getValue2(txt_Zone_1);var locGroup1Value=getValue2(txt_LocGroup1_1);var locGroup2Value=getValue2(txt_LocGroup2_1);var locationIdFmValue=getValue2(txt_LocationIdFm_1);var locationIdToValue=getValue2(txt_LocationIdTo_1);var all=userd_PageInfo.ALL;var now=(userd_AllInfo_Index+1)+(parseFloat(userd_PageInfo.PAGENOW)-1)*parseFloat(userd_PageInfo.PAGESIZE);var pageNow=getValue2(hide_PageIndex_1);initHtmlPage();if(parseInt(now)==parseInt(all)){userd_next_last="";}else{userd_next_last=parseFloat(userd_AllInfo_Index);}setValue(txt_CustomerId_1,customerIdValue);setValue(txt_FromTaskId_1,fromTaskIdValue);setValue(txt_ToTaskId_1,toTaskIdValue);setValue(txt_ZoneGroup_1,zoneGroupValue);setValue(txt_Zone_1,zoneValue);setValue(txt_LocGroup1_1,locGroup1Value);setValue(txt_LocGroup2_1,locGroup2Value);setValue(txt_LocationIdFm_1,locationIdFmValue);setValue(txt_LocationIdTo_1,locationIdToValue);setValue(hide_PageIndex_1,pageNow);buf_IsAutoGetTask_1=true;doButConfirm1Action();}else{if(codeValue_NORECORD==replyData.codeValue){}else{showViewSingle(_div4Input,inViewsKeys);var returnMessage=replyData.mesg;first_EchoMessage(returnMessage,first_Alert,"");first_MessageSystem(getValue(hide_Message_09).replace("&1","TSK_TASKLISTS"),false);setFocus2(but_Confirm_4);}}}}function doTxtQty4Action(id){var qtyValue=getValue2(txt_Qty_4_1);if(!isNumber(qtyValue)){autoFocus("ERROR"+txt_Qty_4_1);return;}setValue(hide_Qty_2,qtyValue);setFocus2(but_Confirm_4);}function doButScanbysingle4Action(id){showViewSingle(_div3Input,inViewsKeys);userd_ScanQty=0;sfc_SetValue(txt_Sku_3,getValue2(wxt_Sku_2),sfc_Code_3);if(BLD_COU!="Y"){setValue(txt_Qty_3,userd_ScanQty);}autoFocus(txt_Sku_3);}function doButConfirm4Action(id){var nextId=sfc_GetNextId(id,sfc_Code_4);if(nextId!=sfc_Code_4){autoFocus(nextId);return;}var qtyValue=getValue2(txt_Qty_4_1);if(sfc_IsDisPlay(txt_Qty_4_1,sfc_Code_4)&&!isNumber(qtyValue)){autoFocus("ERROR"+txt_Qty_4_1);return;}setValue(hide_Qty_2,qtyValue);if(recordIsNewSku_2=="Y"){setValue(hide_Sku_2,getValue2(txt_ScanSku_2));setValue(hide_FmLoction_4,userd_AllInfo[userd_AllInfo_Index].FMLOCATION.toUpperCase());_prevView=_div4Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"insertCountTask",QSKeys_insertCountTask,insertCountTask);}else{var databaseUom=userd_AllInfo[userd_AllInfo_Index].UOM.toUpperCase();var databaseQty=userd_AllInfo[userd_AllInfo_Index].QTY.toUpperCase();var databaseQtyEach=0;for(var i=0;i<userd_UomCode_Array.length;i++){if(databaseUom==userd_UomCode_Array[i]){databaseQtyEach=databaseQty*parseFloat(userd_UomQty_Array[i]);}}if(parseFloat(databaseQtyEach)!=parseFloat(getValue(hide_Qty_2))){startMusic();if(!confirm(getValue(hide_Message_11).replace("&1",getValue(hide_Qty_2)))){setFocus(txt_Qty_4_1);first_MessageSystemById(hide_Message_07);return;}}_prevView=_div4Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"updateCountTask",QSKeys_updateCountTask,updateCountTask);}}function doButCancel4Action(id){if(COU_SKU_LOC!="NO"||isY(COU_SKP_LOT)||userd_AllInfo[userd_AllInfo_Index].FMLOTNUM=="*"){showViewSingle(_div2Input,inViewsKeys);setFocus2(but_Confirm_2);}else{showViewSingle(PublicJs_dynamicLot_divLotInput,inViewsKeys);setFocus2("PublicJs_dynamicLot_ButtonConfirmLot");}}function doButStockout4Action(id){if(first_EchoMessage(getValue(hide_Message_12),first_Confirm,"")){setValue(hide_Qty_2,0);_prevView=_div4Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"updateCountTask",QSKeys_updateCountTask,updateCountTask);}}function insertCountTask(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate2){lastSEQUpdate2=curSEQ;var returnMessage=replyData.mesg;if(codeValue_OK==replyData.codeValue){var customerIdValue=getValue2(txt_CustomerId_1);var fromTaskIdValue=getValue2(txt_FromTaskId_1);var toTaskIdValue=getValue2(txt_ToTaskId_1);var zoneGroupValue=getValue2(txt_ZoneGroup_1);var zoneValue=getValue2(txt_Zone_1);var locGroup1Value=getValue2(txt_LocGroup1_1);var locGroup2Value=getValue2(txt_LocGroup2_1);var locationIdFmValue=getValue2(txt_LocationIdFm_1);var locationIdToValue=getValue2(txt_LocationIdTo_1);var all=userd_PageInfo.ALL;var now=(userd_AllInfo_Index+1)+(parseFloat(userd_PageInfo.PAGENOW)-1)*parseFloat(userd_PageInfo.PAGESIZE);var pageNow=getValue2(hide_PageIndex_1);initHtmlPage();if(parseInt(now)==parseInt(all)){userd_next_last="";}else{userd_next_last=parseFloat(userd_AllInfo_Index);}setValue(txt_CustomerId_1,customerIdValue);setValue(txt_FromTaskId_1,fromTaskIdValue);setValue(txt_ToTaskId_1,toTaskIdValue);setValue(txt_ZoneGroup_1,zoneGroupValue);setValue(txt_Zone_1,zoneValue);setValue(txt_LocGroup1_1,locGroup1Value);setValue(txt_LocGroup2_1,locGroup2Value);setValue(txt_LocationIdFm_1,locationIdFmValue);setValue(txt_LocationIdTo_1,locationIdToValue);setValue(hide_PageIndex_1,pageNow);buf_IsAutoGetTask_1=true;doButConfirm1Action();}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_div4Input,inViewsKeys);setFocus2(but_Confirm_4);first_EchoMessage(getValue(hide_Message_03).replace("&1","INV_LOT_ATT"),first_Alert,"");}else{showViewSingle(_div4Input,inViewsKeys);setFocus2(but_Confirm_4);first_EchoMessage(returnMessage,first_Alert,"");first_MessageSystemById(returnMessage);}}}}function uomList_updateMessageBar(message){first_MessageSystemById(message);}function uomList_ConfirmQty(){doButConfirm4Action();}function showPageFive(isFromLocation){sfc_SetValue(wxt_FMLocation_5,userd_AllInfo[0].FMLOCATION,sfc_Code_5);if(!isFromLocation){sfc_SetValue(txt_FMLocation_5,userd_AllInfo[0].FMLOCATION,sfc_Code_5);}sfc_SetValue(txt_Sku_5,"",sfc_Code_5);sfc_SetValue(wxt_CountStatus_5,"",sfc_Code_5);userd_ScanSku=new Array();userd_ShowSkuList=new Array();userd_NewSkuList=new Array();showViewSingle(_div5Input,inViewsKeys);if(COU_PCS_SCN=="Y"){sfc_SetValue(txt_Qty_5,1,sfc_Code_5);enabled=0;getElement(txt_Qty_5).readOnly=true;getElement(txt_Qty_5).className="input_text_white_long";}else{sfc_SetValue(txt_Qty_5,"",sfc_Code_5);enabled=1;getElement(txt_Qty_5).readOnly=false;getElement(txt_Qty_5).className="input_text_long";}var divHeight=scrollAutoDiv("div_CountList_5","hide_PageControl_5",65,180);if(isNumber(divHeight+"")){var countedLineNumber_1=parseInt(parseInt(divHeight)/20)-1;if(countedLineNumber_1>=1){userd_MinLineNumber_1=countedLineNumber_1;}}doGetCountTaskInfo(isFromLocation);}function scrollAutoDiv(targetObjId,offObjIds,minHeight,otherOffHeight){var divHeight=document.documentElement.clientHeight;var offObjIdsList=offObjIds.split("#");for(var i=0;i<offObjIdsList.length;i++){divHeight-=document.getElementById(offObjIdsList[i]).offsetHeight;}if(!isNumber(otherOffHeight+"")){otherOffHeight=0;}divHeight-=otherOffHeight;if(!isNumber(minHeight+"")){minHeight=60;}if(divHeight<=minHeight){divHeight=minHeight;document.getElementById(targetObjId).style.height=minHeight+"px";}else{document.getElementById(targetObjId).style.height=divHeight+"px";}return divHeight;}function doTxtFindLocation5Action(id){var fmLocation=first_GetLocationValue(txt_FMLocation_5);if(fmLocation.length==0){autoFocus(sfc_GetNextId(txt_FMLocation_5,sfc_Code_5));return;}if(!(fmLocation=="")&&fmLocation!=getValue2(wxt_FMLocation_5)){autoFocus("ERROR2"+txt_FMLocation_5);return;}setValue(hide_FmLoction_5,fmLocation);_prevView=_div5Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getCountTask",QSKeys_getCountTask,getCountTaskByLocation);}function getCountTaskByLocation(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate1){lastSEQUpdate1=curSEQ;var returnMessage=replyData.mesg;if(codeValue_OK==replyData.codeValue){userd_PageInfo=replyData.strData1;userd_AllInfo=replyData.strData2;userd_CUSTOMERIDInfo=replyData.strData2;var customerId=getValue2(txt_CustomerId_1);var customerIdValue=userd_AllInfo[0].CUSTOMERID;var customerIdIndex=-1;for(var i=1;i<userd_AllInfo.length;i++){if(customerIdValue!=userd_AllInfo[i].CUSTOMERID){customerIdIndex=i;break;}}if(customerId.length>0){userd_CustomerId=customerId;}else{if(customerIdIndex==-1){userd_CustomerId=userd_AllInfo[0].CUSTOMERID;}else{userd_CustomerId="*";}}showPageFive(true);sfc_SetValue(wxt_FMLocation_5,userd_AllInfo[0].FMLOCATION,sfc_Code_5);}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_div5Input,inViewsKeys);startMusic();userd_ScanSku=new Array();userd_TdContentList_1=new Array();userd_ShowSkuList=new Array();userd_NewSkuList=new Array();userd_AllQty=0;userd_ScanQty=0;autoFocus("ERROR1"+txt_FMLocation_5);return;}else{showViewSingle(_div5Input,inViewsKeys);first_EchoMessage(returnMessage,first_Alert,"first_MessageSystemById");autoFocus(txt_FMLocation_5);}}}}function doChkCancel5Action(id){if(getValue(chk_Cancel_5)=="Y"){buf_chk_Cancel="Y";}else{buf_chk_Cancel="N";}}function doTxtQty5Action(id){var fmLocation=first_GetLocationValue(txt_FMLocation_5);var qty=getValue(txt_Qty_5);if(!(fmLocation=="")&&fmLocation!=getValue2(wxt_FMLocation_5)){autoFocus("ERROR2"+txt_FMLocation_5);return;}if(qty.length==0){autoFocus(sfc_GetNextId(txt_Qty_5,sfc_Code_5));return;}if(!isNumber(getValue(txt_Qty_5))){autoFocus("ERROR"+txt_Qty_5);return;}if(parseInt(getValue(txt_Qty_5))==0){setFocus(txt_Sku_5);first_MessageSystem(hide_Message_20.replace("&1",getValue2(txt_Sku_5)),false);return;}var skuValue=getValue2(txt_Sku_5);if(skuValue.length==0){autoFocus("ERROR"+txt_Sku_5);return;}var perAddQty=0;if(buf_chk_Cancel=="Y"){perAddQty=-(parseInt(getValue2(txt_Qty_5)));}else{perAddQty=parseInt(getValue2(txt_Qty_5));}if(buf_index_5==-1&&buf_indexNew_5==-1){_prevView=_div5Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"checkSku",QSKeys_checkSku,checkSku);}if(buf_index_5==-1&&buf_indexNew_5!=-1){addNewSku(skuValue,perAddQty);sfc_SetValue(txt_Sku_5,"",sfc_Code_5);sfc_SetValue(txt_Qty_5,1,sfc_Code_5);setFocus(txt_Sku_5);showScanResult(new Array(skuValue));return;}if(buf_index_5!=-1){addSkuQty(skuValue,perAddQty);sfc_SetValue(txt_Sku_5,"",sfc_Code_5);sfc_SetValue(txt_Qty_5,1,sfc_Code_5);setFocus(txt_Sku_5);showScanResult(new Array(skuValue));return;}}function doTxtSku5Action(id){first_MessageSystemById("");var fmLocation=first_GetLocationValue(txt_FMLocation_5);if(!(fmLocation=="")&&fmLocation!=getValue2(wxt_FMLocation_5)){autoFocus("ERROR2"+txt_FMLocation_5);return;}var skuValue=getValue2(txt_Sku_5);if(skuValue.length==0){autoFocus(sfc_GetNextId(txt_Sku_5,sfc_Code_5));return;}var paramInfo=new Array("OTH","","",userd_CustomerId,"",skuValue);SkuBarcodeAnalyzer_SetParameterAttribute(userd_CustomerId,"*","*");SkuBarcodeAnalyzer_AnalyzerSkuBarCode(inViewsKeys,paramInfo,goOnTxtSku5Action);}function goOnTxtSku5Action(){var skuInfo=SkuBarcodeAnalyzer_getSkuInfoResult();var returnCode=skuInfo[0];showViewSingle(_div5Input,inViewsKeys);if(returnCode==codeValue_OK){var skuOutput=skuInfo[1];var qtyOutput=skuInfo[2];setValue(txt_Sku_5,skuOutput);var skuValue=getValue2(txt_Sku_5);if(skuValue.length==0){autoFocus("ERROR"+txt_Sku_5);return;}if(COU_PCS_SCN=="Y"){if(!isNumber(getValue(txt_Qty_5))){autoFocus("ERROR"+txt_Qty_5);return;}if(parseInt(getValue(txt_Qty_5))==0){setFocus(txt_Sku_5);first_MessageSystem(hide_Message_20.replace("&1",getValue2(txt_Sku_5)),false);return;}}else{if(isNumber(qtyOutput)){setValue(txt_Qty_5,qtyOutput);}else{setValue(txt_Qty_5,1);}}checkSkuNotByBuffer(skuValue);}else{if(returnCode==codeValue_NORECORD){setFocus(txt_Sku_5);first_EchoMessage(skuInfo[1],first_Alert,"first_MessageSystemById");}else{setFocus(txt_Sku_5);first_EchoMessage(skuInfo[1],first_Alert,"first_MessageSystemById");}}}function checkSkuNotByBuffer(skuValue){var perAddQty=0;if(buf_chk_Cancel=="Y"){perAddQty=-(parseInt(getValue2(txt_Qty_5)));}else{perAddQty=parseInt(getValue2(txt_Qty_5));}buf_index_5=-1;for(var i=0;i<userd_ShowSkuList.length;i++){if(userd_ShowSkuList[i][1]==skuValue){buf_index_5=i;break;}}if(buf_index_5==-1){buf_indexNew_5=-1;for(var i=0;i<userd_NewSkuList.length;i++){if(userd_NewSkuList[i][1]==skuValue){buf_indexNew_5=i;break;}}if(buf_indexNew_5==-1){if(true){if(first_EchoMessage(getValue(hide_Message_19),first_Confirm,"first_MessageSystemById")){setValue(hide_Sku_5,skuValue);setValue(wxt_Sku_6,skuValue);_prevView=_div5Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getCustomerIdAction",QSKeys_getCustomerIdAction,getCustomerIdAction);return;}else{autoFocus(txt_Sku_5);}}else{autoFocus("ERROR1"+txt_Sku_5);return;}}else{if(COU_PCS_SCN!="Y"){autoFocus(txt_Qty_5);return;}addNewSku(skuValue,perAddQty);}}else{if(COU_PCS_SCN!="Y"){autoFocus(txt_Qty_5);return;}addSkuQty(skuValue,perAddQty);}sfc_SetValue(txt_Sku_5,"",sfc_Code_5);sfc_SetValue(txt_Qty_5,1,sfc_Code_5);setFocus(txt_Sku_5);showScanResult(new Array(skuValue));}function getCustomerIdAction(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01+":"+e.message);return;}var curSEQ=replyData.SEQ;if(curSEQ>first_lastSEQUpdate1){first_lastSEQUpdate1=curSEQ;var returnMessage=replyData.mesg;if(codeValue_OK==replyData.codeValue){var obj2=replyData.strData2;showViewSingle(_div6Input,inViewsKeys);removeAllOptions(cmb_CustomerId_6);userd_CustomerAndSkuInfo=new Array();addOptionToSelect(cmb_CustomerId_6,"---","---");for(var i=0;i<obj2.length;i++){addOptionToSelect(cmb_CustomerId_6,obj2[i].CUSTOMERID,obj2[i].CUSTOMERID);userd_CustomerAndSkuInfo.push(new Array(obj2[i].CUSTOMERID,obj2[i].SKU_NAME));}autoFocus(cmb_CustomerId_6);}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_prevView,inViewsKeys);autoFocus("ERROR1"+txt_Sku_5);}else{showViewSingle(_prevView,inViewsKeys);first_EchoMessage(returnMessage,first_Alert,"");setFocus(txt_Sku_5);}}}}function checkSku(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate6){lastSEQUpdate6=curSEQ;var returnMessage=replyData.mesg;if(codeValue_OK==replyData.codeValue){var obj2=replyData.strData2;showViewSingle(_div5Input,inViewsKeys);var sku=getValue2(txt_Sku_5);var qty=parseInt(getValue(txt_Qty_5));var skuName=obj2[0].SKUNAME;userd_NewSkuList.push(new Array(buf_CustomerId_6,sku,qty,skuName,"","","","","","","","","","","","","",""));userd_ScanQty=parseInt(userd_ScanQty)+parseInt(qty);buf_userd_NewSkuQty+=qty;setValue(txt_Sku_5,"");sfc_SetValue(txt_Qty_5,1,sfc_Code_5);setFocus(txt_Sku_5);showScanResult(new Array());}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_prevView,inViewsKeys);autoFocus("ERROR1"+txt_Sku_5);return;}else{showViewSingle(_prevView,inViewsKeys);setFocus(txt_Sku_5);first_EchoMessage(returnMessage,first_Alert,"first_MessageSystemById");}}}}function doGetCountTaskInfo(isFromLocation){if(isFromLocation){autoFocus(sfc_GetNextActionId(txt_FMLocation_5,sfc_Code_5));}else{autoFocus(sfc_GetNextActionId("init",sfc_Code_5));}userd_TableId_1="userd_TableId_1";userd_ThNameList_1=new Array(getValue(hide_Lbl_04),"SKU",getValue(hide_Lbl_01),getValue(hide_Lbl_03));userd_TdContentList_1=new Array();userd_ShowLineNumber_1=false;userd_ShowDeleteAction_1=false;userd_ShowInfoByDESC_1=false;userd_ShowSkuList=new Array();var fmLocationValue=first_GetLocationValue(txt_FMLocation_5);for(var i=0;i<userd_CUSTOMERIDInfo.length;i++){if(fmLocationValue==userd_CUSTOMERIDInfo[i].FMLOCATION){if(DataLocaltionIsNull==0){DataLocaltionIsNull=1;}var indexNow=-1;for(var j=0;j<userd_ShowSkuList.length;j++){if(userd_ShowSkuList[j][1]==userd_CUSTOMERIDInfo[i].SKU){indexNow=j;break;}}if(indexNow==-1){userd_ShowSkuList.push(new Array(userd_CUSTOMERIDInfo[i].CUSTOMERID,userd_CUSTOMERIDInfo[i].SKU,userd_CUSTOMERIDInfo[i].QTY,userd_CUSTOMERIDInfo[i].SKU_NAME,userd_CUSTOMERIDInfo[i].TASKID,userd_CUSTOMERIDInfo[i].TASKID_SEQUENCE,userd_CUSTOMERIDInfo[i].DYNAMICINVENTORY));}else{if(userd_ShowSkuList[indexNow][2]==""||userd_ShowSkuList[indexNow][2]==""){userd_ShowSkuList[indexNow][2]=0;}userd_ShowSkuList[indexNow][2]=parseFloat(userd_ShowSkuList[indexNow][2])+parseFloat(userd_CUSTOMERIDInfo[i].QTY);}}}userd_ScanSku=new Array();showScanResult(new Array());}function showScanResult(skusNow){userd_TdContentList_1=new Array();userd_AllQty=0;var allCount=0;var skusInDatabase=false;var skusInAdd=false;for(var i=0;i<skusNow.length;i++){var skuNow=skusNow[i];var indexInShow=-1;var indexInScan=-1;for(var j=0;j<userd_ShowSkuList.length;j++){if(skuNow==userd_ShowSkuList[j][1]){indexInShow=j;break;}}for(var j=0;j<userd_ScanSku.length;j++){if(skuNow==userd_ScanSku[j][0]){indexInScan=j;break;}}if(indexInShow!=-1&&indexInScan!=-1){var allQty=(BLD_COU=="Y")?("???"):(userd_ShowSkuList[indexInShow][2]);if(allQty==""||allQty==null){allQty=0;}if(indexNow==-1){userd_TdContentList_1.push(new Array(userd_ShowSkuList[indexInShow][0],userd_ShowSkuList[indexInShow][1],allQty+"/0"),userd_ShowSkuList[indexInShow][3]);}else{userd_TdContentList_1.push(new Array(userd_ShowSkuList[indexInShow][0],userd_ShowSkuList[indexInShow][1],allQty+"/"+userd_ScanSku[indexInScan][1],userd_ShowSkuList[indexInShow][3]));}if(BLD_COU!="Y"){userd_AllQty+=parseInt(allQty,10);}skusInDatabase=true;}else{userd_TdContentList_1=new Array();skusInDatabase=false;break;}}if(userd_TdContentList_1.length==0||!skusInDatabase){for(var i=0;i<skusNow.length;i++){var skuNow=skusNow[i];var indexInNew=-1;for(var i=0;i<userd_NewSkuList.length;i++){if(skuNow==userd_NewSkuList[i][0]){indexInNew=i;break;}}if(indexInNew!=-1){userd_TdContentList_1.push(new Array(userd_NewSkuList[i][0],userd_NewSkuList[i][1],"NEW/"+userd_NewSkuList[i][2],userd_NewSkuList[i][3]));skusInAdd=true;}}}var indexSkuNow=-1;var unScannedQty=0;for(var i=0;i<userd_ShowSkuList.length;i++){if(userd_ShowSkuList[i][2]==""||userd_ShowSkuList[i][2]==null){userd_ShowSkuList[i][2]=0;}allCount+=parseFloat(userd_ShowSkuList[i][2]);var allQty=(BLD_COU=="Y")?("???"):(userd_ShowSkuList[i][2]);if(allQty==""||allQty==null){allQty=0;}if(skusInDatabase){var needContinue=false;for(var j=0;j<skusNow.length;j++){if(skusNow[j]==userd_ShowSkuList[i][1]){indexSkuNow=j;needContinue=true;break;}}if(needContinue){var qty=allQty-userd_ScanSku[indexSkuNow][1];if(qty>0){unScannedQty+=qty;}continue;}}var indexNow=-1;for(var j=0;j<userd_ScanSku.length;j++){if(userd_ScanSku[j][0]==userd_ShowSkuList[i][1]){indexNow=j;break;}}if(indexNow==-1){userd_TdContentList_1.push(new Array(userd_ShowSkuList[i][0],userd_ShowSkuList[i][1],allQty+"/0",userd_ShowSkuList[i][3]));unScannedQty+=parseInt(allQty);}else{userd_TdContentList_1.push(new Array(userd_ShowSkuList[i][0],userd_ShowSkuList[i][1],allQty+"/"+userd_ScanSku[indexNow][1],userd_ShowSkuList[i][3]));var qty=allQty-userd_ScanSku[indexNow][1];if(qty>0){unScannedQty+=qty;}}if(BLD_COU!="Y"){userd_AllQty+=parseInt(allQty,10);}}for(var i=0;i<userd_NewSkuList.length;i++){if(skusInAdd){var needContinue=false;for(var j=0;j<skusNow.length;j++){if(skusNow[j]==userd_NewSkuList[i][1]){needContinue=true;break;}}if(needContinue){continue;}}userd_TdContentList_1.push(new Array(userd_NewSkuList[i][0],userd_NewSkuList[i][1],"NEW/"+userd_NewSkuList[i][2],userd_NewSkuList[i][3]));}(BLD_COU=="Y")?(setValue(wxt_CountStatus_5,userd_ScanQty+"[???/???]")):(setValue(wxt_CountStatus_5,userd_ScanQty+"["+allCount+"/"+unScannedQty+"]"));var tableCode=ShowTable_GetTableCode(userd_TableId_1,userd_ThNameList_1,userd_TdContentList_1,userd_MinLineNumber_1,userd_MaxLineNumber_1,userd_ShowLineNumber_1,userd_ShowDeleteAction_1,userd_ShowInfoByDESC_1);setInnerHTML(div_CountList_5,tableCode);}function ShowTable_ShowAllInfoList(tableId){userd_TableId_2="userd_TableId_2";userd_ThNameList_2=new Array(getValue(hide_Lbl_04),"SKU",getValue(hide_Lbl_01),getValue(hide_Lbl_03));userd_TdContentList_2=userd_TdContentList_1.slice(0);userd_ShowLineNumber_2=false;userd_ShowDeleteAction_2=false;userd_ShowInfoByDESC_2=false;var tableCode=ShowTable_GetTableCode(userd_TableId_2,userd_ThNameList_2,userd_TdContentList_2,userd_MinLineNumber_2,userd_MaxLineNumber_2,userd_ShowLineNumber_2,userd_ShowDeleteAction_2,userd_ShowInfoByDESC_2);setInnerHTML(div_CountList_5,tableCode);}function show_SKU(id){document.getElementById("tr"+id).style.backgroundColor=first_onMouseMove_Color;if(userd_SKUInfo_Index!=-1){document.getElementById("tr"+userd_SKUInfo_Index).style.backgroundColor=first_onMouseSelect_Color;}}function hide_SKU(id){document.getElementById("tr"+id).style.backgroundColor=first_onMouseOut_Color;if(userd_SKUInfo_Index!=-1){document.getElementById("tr"+userd_SKUInfo_Index).style.backgroundColor=first_onMouseSelect_Color;}}function ShowTable_DeleteClick_Action(tableId,index){}function ShowTable_SingleClick_Action(tableId,index){}function ShowTable_DoubleClick_Action(tableId,index){}function doButConfirm5Action(id){var nextId=sfc_GetNextId(id,sfc_Code_5);if(nextId!=sfc_Code_5){autoFocus(nextId);return;}var scanResult=new Array();var isSameQty=userd_ScanSku.length==0?false:true;var buf_ScanSkuAndQty=new Array();for(var i=0;i<userd_ScanSku.length;i++){buf_ScanSkuAndQty.push(new Array(userd_ScanSku[i][0],userd_ScanSku[i][1]));}var fmLocationValue=first_GetLocationValue(txt_FMLocation_5);if(fmLocationValue.length==0){autoFocus("ERROR"+txt_FMLocation_5);return;}if(!(fmLocationValue=="")&&fmLocationValue!=getValue2(wxt_FMLocation_5)){autoFocus("ERROR2"+txt_FMLocation_5);return;}setValue(hide_FmLoction_5,fmLocationValue);setValue(hide_DocNo_5,userd_AllInfo[userd_AllInfo_Index].DOCNO.toUpperCase());setValue(hide_FmtraceId_2,userd_AllInfo[userd_AllInfo_Index].FMTRACEID.toUpperCase());setValue(hide_TaskId_Sequence,userd_AllInfo[userd_AllInfo_Index].TASKID_SEQUENCE.toUpperCase());for(var i=0;i<userd_ShowSkuList.length;i++){var taskId=userd_ShowSkuList[i][4];var taskIdSequence=userd_ShowSkuList[i][5];var sku=userd_ShowSkuList[i][1];var qtyInDatabase=userd_ShowSkuList[i][2];if(qtyInDatabase==""||qtyInDatabase==null){qtyInDatabase=0;}var qty=0;var isLastOne=true;for(var j=i+1;j<userd_ShowSkuList.length;j++){if(sku==userd_ShowSkuList[j][1]){isLastOne=false;break;}}for(var j=0;j<buf_ScanSkuAndQty.length;j++){if(sku==buf_ScanSkuAndQty[j][0]){if(parseFloat(buf_ScanSkuAndQty[j][1])>parseFloat(qtyInDatabase)&&!isLastOne){qty=qtyInDatabase;buf_ScanSkuAndQty[j][1]=parseFloat(buf_ScanSkuAndQty[j][1])-parseFloat(qtyInDatabase);break;}else{if(parseFloat(buf_ScanSkuAndQty[j][1])!=parseFloat(qtyInDatabase)){isSameQty=false;}qty=buf_ScanSkuAndQty[j][1];buf_ScanSkuAndQty[j][1]=0;break;}}}if("Y"==userd_ShowSkuList[i][6]){scanResult.push(taskId+"&"+taskIdSequence+"&"+sku+"&"+getValue(hide_FmtraceId_2)+"&"+qtyInDatabase+":"+qty+";");}else{scanResult.push(taskId+"&"+taskIdSequence+"&"+sku+"&"+getValue(hide_FmtraceId_2)+"& :"+qty+";");}}setValue(hide_ScanResult_5,scanResult.join(""));var addSkuInfo=new Array();for(var i=0;i<userd_NewSkuList.length;i++){var info=userd_NewSkuList[i];for(var j=0;j<info.length;j++){if(j>0){addSkuInfo.push(":");}addSkuInfo.push(userd_NewSkuList[i][j].length==0?"_20130402YangYi_":userd_NewSkuList[i][j]);}addSkuInfo.push(";");}setValue(hide_AddSkuResult_5,addSkuInfo.join(""));if("Y"==userd_AllInfo[userd_AllInfo_Index].DYNAMICINVENTORY.toUpperCase()){setValue(hide_QtyIndatabase_2,userd_AllInfo[userd_AllInfo_Index].QTY.toUpperCase());}else{setValue(hide_QtyIndatabase_2,"");}startMusic();if(isSameQty||addSkuInfo.length>0||first_EchoMessage(getValue(hide_Message_11).replace("&1",""),first_Confirm,"")){_prevView=_div5Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"updateListCountTask",QSKeys_updateListCountTask,updateListCountTask);}}function updateListCountTask(responseText){var replyData=null;try{replyData=eval("("+responseText+")");}catch(e){alert(first_ErrorMessage01);setInnerHTML("waitingMsg",first_ErrorMessage01);return;}var curSEQ=replyData.SEQ;if(curSEQ>lastSEQUpdate6){lastSEQUpdate6=curSEQ;var returnMessage=replyData.mesg;if(codeValue_OK==replyData.codeValue){buf_IsAutoGetTask_1=true;initPageFive();userd_AllQty=0;userd_ScanQty=0;doButConfirm1Action();}else{if(codeValue_NORECORD==replyData.codeValue){showViewSingle(_div5Input,inViewsKeys);first_EchoMessage(returnMessage,first_Alert,"first_MessageSystemById");first_MessageSystem(getValue(hide_Message_09).replace("&1",""),false);setFocus(txt_Sku_5);}else{showViewSingle(_div5Input,inViewsKeys);startMusic();setFocus2(but_Confirm_5);first_EchoMessage(returnMessage,first_Alert,"first_MessageSystemById");}}}}function doButCancel5Action(id){if(first_EchoMessage(getValue(hide_Message_23),first_Confirm,"")){userd_ScanSku=new Array();userd_ShowSkuList=new Array();userd_NewSkuList=new Array();userd_AllQty=0;userd_ScanQty=0;showViewSingle(_div1Input,inViewsKeys);setFocus(txt_CustomerId_1);first_MessageSystemById("");}else{setFocus(txt_Sku_5);}}function PublicJs_dynamicLot_ConfirmLotButton(){var buf_lotlist_1=new Array();var buf_userd_AllInfo_1=new Array();var obj=userd_AllInfo[userd_AllInfo_Index];buf_lotlist_1.push(buf_Lot01_1,buf_Lot02_1,buf_Lot03_1,buf_Lot04_1,buf_Lot05_1,buf_Lot06_1,buf_Lot07_1,buf_Lot08_1,buf_Lot09_1,buf_Lot10_1,buf_Lot11_1,buf_Lot12_1);buf_userd_AllInfo_1.push(obj.LOTATT01,obj.LOTATT02,obj.LOTATT03,obj.LOTATT04,obj.LOTATT05,obj.LOTATT06,obj.LOTATT07,obj.LOTATT08,obj.LOTATT09,obj.LOTATT10,obj.LOTATT11,obj.LOTATT12);for(var i=0;i<buf_userd_AllInfo_1.length;i++){if(buf_lotlist_1[i]!=""&&buf_userd_AllInfo_1[i]!=buf_lotlist_1[i]){first_EchoMessage(getValue(hide_Message_22).replace("&1",(i+1)).replace("&2",buf_userd_AllInfo_1[i]),first_Alert_Focus,"");return;}}_prevView=PublicJs_dynamicLot_divLotInput;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"getUomArray",QSKeys_getUomArray,getUomArray);}function PublicJs_dynamicLot_CancelLotButton(){showViewSingle(_div2Input,inViewsKeys);setFocus2(but_Confirm_2);first_MessageSystemById("");}function doCmbCustomerId6Action(id){var customerIdIndex=0;var customerIdValue=getValue(cmb_CustomerId_6);if(customerIdValue=="---"||customerIdValue==""){setValue(wxt_SkuDescr_6,"");setFocus2(cmb_CustomerId_6);first_MessageSystemById(hide_Message_13);return;}for(var i=0;i<userd_CustomerAndSkuInfo.length;i++){if(customerIdValue==userd_CustomerAndSkuInfo[i][0]){customerIdIndex=i;break;}}setValue(wxt_SkuDescr_6,userd_CustomerAndSkuInfo[customerIdIndex][1]);}function doButConfirm6Action(id){var CustomerId=getValue(cmb_CustomerId_6);if(CustomerId=="---"||CustomerId==""){setValue(wxt_SkuDescr_6,"");setFocus2(cmb_CustomerId_6);first_MessageSystemById(hide_Message_13);return;}buf_CustomerId_6=CustomerId;setValue(hide_CustomerId_5,CustomerId);if(COU_PCS_SCN=="Y"){_prevView=_div5Input;showViewSingle(_div1Waiting,inViewsKeys);doServerAction(className,"checkSku",QSKeys_checkSku,checkSku);return;}showViewSingle(_div5Input,inViewsKeys);setFocus(txt_Qty_5);first_MessageSystemById("");}function doButCancel6Action(id){showViewSingle(_div5Input,inViewsKeys);setFocus(txt_Sku_5);first_MessageSystemById("");}function addNewSku(skuValue,perAddQty){if(parseInt(userd_NewSkuList[buf_indexNew_5][2])+perAddQty<0){setFocus(txt_Sku_5);first_MessageSystem(getValue(hide_Message_20).replace("&1",skuValue),false);return;}userd_NewSkuList[buf_indexNew_5][2]=parseInt(userd_NewSkuList[buf_indexNew_5][2])+perAddQty;userd_ScanQty+=perAddQty;buf_userd_NewSkuQty+=perAddQty;}function addSkuQty(skuValue,perAddQty){scanIndex=-1;for(var i=0;i<userd_ScanSku.length;i++){if(skuValue==userd_ScanSku[i][0]){scanIndex=i;break;}}if(scanIndex==-1){if(userd_ScanQty+perAddQty<0){setFocus(txt_Sku_5);first_MessageSystem(getValue(hide_Message_20).replace("&1",skuValue),false);return;}userd_ScanSku.push(new Array(skuValue,perAddQty));userd_ScanQty+=perAddQty;}else{if(parseInt(userd_ScanSku[scanIndex][1])+perAddQty<0){setFocus(txt_Sku_5);first_MessageSystem(getValue(hide_Message_20).replace("&1",skuValue),false);return;}userd_ScanSku[scanIndex][1]=parseInt(userd_ScanSku[scanIndex][1])+perAddQty;userd_ScanQty+=perAddQty;}}